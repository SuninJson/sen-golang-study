<svg width="1255" height="722" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" overflow="hidden"><defs><clipPath id="clip0"><rect x="18" y="-1" width="1255" height="722"/></clipPath></defs><g clip-path="url(#clip0)" transform="translate(-18 1)"><rect x="23.5001" y="127.5" width="154" height="51" stroke="#FF6B6B" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="13" transform="translate(67.7682 158)">1.创建路由</text><rect x="23.5001" y="335.5" width="154" height="51" stroke="#FF6B6B" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="13" transform="translate(61.1015 366)">2.创建服务器</text><rect x="23.5001" y="470.5" width="154" height="50" stroke="#FF6B6B" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="13" transform="translate(67.7683 492)">3.监听端口<tspan font-size="13" x="5.5" y="16">提供服务</tspan></text><rect x="311.5" y="127.5" width="154" height="51" stroke="#FFC4C4" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="13" transform="translate(336.854 158)">1.1.设置路由规则</text><rect x="596.5" y="127.5" width="154" height="51" stroke="#FFC4C4" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="13" transform="translate(615.125 150)">1.2.定义请求处理器<tspan font-size="13" x="17.6666" y="16">（回调函数）</tspan></text><path d="M516.5 58.9026C516.5 57.5757 517.576 56.5001 518.903 56.5001L675.098 56.5001C676.424 56.5001 677.5 57.5757 677.5 58.9026L677.5 116.098C677.5 117.424 676.424 118.5 675.098 118.5L518.903 118.5C517.576 118.5 516.5 117.424 516.5 116.098Z" stroke="#FFD700" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#8C8C8C" font-family="Consolas,Consolas_MSFontService,sans-serif" font-style="italic" font-weight="400" font-size="5" transform="translate(525.914 67)">//<tspan font-size="5" x="9" y="0">HTTP</tspan><tspan font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="21" y="0">请求多路复用器：路由器</tspan><tspan fill="#0033B3" font-style="normal" font-size="5" x="0" y="6">type </tspan><tspan fill="#000000" font-style="normal" font-size="5" x="15" y="6">ServeMux </tspan><tspan fill="#0033B3" font-style="normal" font-size="5" x="42" y="6">struct </tspan><tspan fill="#080808" font-style="normal" font-size="5" x="63" y="6">{</tspan><tspan fill="#000000" font-style="normal" font-size="5" x="9" y="13">mu </tspan><tspan fill="#805900" font-style="normal" font-size="5" x="27" y="13">sync</tspan><tspan fill="#080808" font-style="normal" font-size="5" x="39" y="13">.</tspan><tspan fill="#336ECC" font-style="normal" font-size="5" x="42" y="13">RWMutex</tspan><tspan font-size="5" x="72" y="13">//</tspan><tspan font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="78" y="13">读写锁</tspan><tspan font-size="5" x="9" y="19">//</tspan><tspan font-size="5" x="18" y="19">key: pattern; value: {Handler, pattern}</tspan><tspan fill="#000000" font-style="normal" font-size="5" x="9" y="26">m </tspan><tspan fill="#0033B3" font-style="normal" font-size="5" x="27" y="26">map</tspan><tspan fill="#080808" font-style="normal" font-size="5" x="36" y="26">[</tspan><tspan fill="#0033B3" font-style="normal" font-size="5" x="39" y="26">string</tspan><tspan fill="#080808" font-style="normal" font-size="5" x="57" y="26">]</tspan><tspan fill="#336ECC" font-style="normal" font-size="5" x="60" y="26">muxEntry</tspan><tspan fill="#000000" font-style="normal" font-size="5" x="9" y="32">es </tspan><tspan fill="#080808" font-style="normal" font-size="5" x="27" y="32">[]</tspan><tspan fill="#336ECC" font-style="normal" font-size="5" x="33" y="32">muxEntry </tspan><tspan font-size="5" x="72" y="32">// </tspan><tspan font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="81" y="32">按</tspan><tspan font-size="5" x="86.3333" y="32">URL</tspan><tspan font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="95.3333" y="32">从长到短排序</tspan><tspan fill="#000000" font-style="normal" font-size="5" x="9" y="38">hosts </tspan><tspan fill="#0033B3" font-style="normal" font-size="5" x="27" y="38">bool </tspan><tspan font-size="5" x="72" y="38">// </tspan>pattern<tspan font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="102" y="38">中是否有主机名</tspan><tspan fill="#080808" font-style="normal" font-size="5" x="0" y="45">}</tspan></text><path d="M695.5 4.45263C695.5 2.26968 697.27 0.500053 699.453 0.500053L900.547 0.500053C902.73 0.500053 904.5 2.26968 904.5 4.45263L904.5 98.5475C904.5 100.73 902.73 102.5 900.547 102.5L699.453 102.5C697.27 102.5 695.5 100.73 695.5 98.5475Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(706.092 11)">func <tspan fill="#080808" font-size="5" x="15" y="0">(</tspan><tspan fill="#000000" font-size="5" x="18" y="0">mux </tspan><tspan fill="#080808" font-size="5" x="30" y="0">*</tspan><tspan fill="#000000" font-size="5" x="33" y="0">ServeMux</tspan><tspan fill="#080808" font-size="5" x="57" y="0">) </tspan><tspan fill="#000000" font-size="5" x="63" y="0">Handle</tspan><tspan fill="#080808" font-size="5" x="81" y="0">(</tspan><tspan fill="#000000" font-size="5" x="84" y="0">pattern string</tspan><tspan fill="#080808" font-size="5" x="126" y="0">, </tspan><tspan fill="#000000" font-size="5" x="132" y="0">handler Handler</tspan><tspan fill="#080808" font-size="5" x="177" y="0">) {</tspan><tspan fill="#080808" font-size="5" x="9" y="6">......</tspan><tspan font-size="5" x="9" y="13">if </tspan><tspan fill="#000000" font-size="5" x="18" y="13">mux</tspan><tspan fill="#080808" font-size="5" x="27" y="13">.</tspan><tspan fill="#000000" font-size="5" x="30" y="13">m </tspan><tspan fill="#080808" font-size="5" x="36" y="13">== </tspan>nil <tspan fill="#080808" font-size="5" x="57" y="13">{</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="63" y="13">// map</tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="81" y="13">初始化</tspan><tspan fill="#000000" font-size="5" x="18" y="19">mux</tspan><tspan fill="#080808" font-size="5" x="27" y="19">.</tspan><tspan fill="#000000" font-size="5" x="30" y="19">m </tspan><tspan fill="#080808" font-size="5" x="36" y="19">= </tspan><tspan fill="#00627A" font-size="5" x="42" y="19">make</tspan><tspan fill="#080808" font-size="5" x="54" y="19">(</tspan>map<tspan fill="#080808" font-size="5" x="66" y="19">[</tspan>string<tspan fill="#080808" font-size="5" x="87" y="19">]</tspan><tspan fill="#000000" font-size="5" x="90" y="19">muxEntry</tspan><tspan fill="#080808" font-size="5" x="114" y="19">)</tspan><tspan fill="#080808" font-size="5" x="9" y="26">}</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="32">// </tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="18" y="32">完成路由与其处理函数的映射</tspan><tspan fill="#000000" font-size="5" x="9" y="38">e </tspan><tspan fill="#080808" font-size="5" x="15" y="38">:= </tspan><tspan fill="#000000" font-size="5" x="24" y="38">muxEntry</tspan><tspan fill="#080808" font-size="5" x="48" y="38">{</tspan><tspan fill="#000000" font-size="5" x="51" y="38">h</tspan><tspan fill="#080808" font-size="5" x="54" y="38">: </tspan><tspan fill="#000000" font-size="5" x="60" y="38">handler</tspan><tspan fill="#080808" font-size="5" x="81" y="38">, </tspan><tspan fill="#000000" font-size="5" x="87" y="38">pattern</tspan><tspan fill="#080808" font-size="5" x="108" y="38">: </tspan><tspan fill="#000000" font-size="5" x="114" y="38">pattern</tspan><tspan fill="#080808" font-size="5" x="135" y="38">}</tspan><tspan fill="#000000" font-size="5" x="9" y="45">mux</tspan><tspan fill="#080808" font-size="5" x="18" y="45">.</tspan><tspan fill="#000000" font-size="5" x="21" y="45">m</tspan><tspan fill="#080808" font-size="5" x="24" y="45">[</tspan><tspan fill="#000000" font-size="5" x="27" y="45">pattern</tspan><tspan fill="#080808" font-size="5" x="48" y="45">] = </tspan><tspan fill="#000000" font-size="5" x="60" y="45">e</tspan><tspan font-size="5" x="9" y="51">if </tspan><tspan fill="#000000" font-size="5" x="18" y="51">pattern</tspan><tspan fill="#080808" font-size="5" x="39" y="51">[</tspan>len<tspan fill="#080808" font-size="5" x="51" y="51">(</tspan><tspan fill="#000000" font-size="5" x="54" y="51">pattern</tspan><tspan fill="#080808" font-size="5" x="75" y="51">)</tspan><tspan fill="#080808" font-size="5" x="78" y="51">-</tspan><tspan fill="#1750EB" font-size="5" x="81" y="51">1</tspan><tspan fill="#080808" font-size="5" x="84" y="51">] == </tspan><tspan fill="#067D17" font-size="5" x="99" y="51">'/</tspan><tspan fill="#067D17" font-family="Calibri,Calibri_MSFontService,sans-serif" font-size="5" x="105" y="51">’</tspan><tspan fill="#080808" font-size="5" x="109.333" y="51">{</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="18" y="58">// </tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="27" y="58">将新的</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="43" y="58">Entry</tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="58" y="58">放到</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="68.6667" y="58">entries</tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="89.6667" y="58">切片正确的位置</tspan><tspan fill="#000000" font-size="5" x="18" y="64">mux</tspan><tspan fill="#080808" font-size="5" x="27" y="64">.</tspan><tspan fill="#000000" font-size="5" x="30" y="64">es </tspan><tspan fill="#080808" font-size="5" x="39" y="64">= </tspan><tspan fill="#000000" font-size="5" x="45" y="64">appendSorted</tspan><tspan fill="#080808" font-size="5" x="81" y="64">(</tspan><tspan fill="#000000" font-size="5" x="84" y="64">mux</tspan><tspan fill="#080808" font-size="5" x="93" y="64">.</tspan><tspan fill="#000000" font-size="5" x="96" y="64">es</tspan><tspan fill="#080808" font-size="5" x="102" y="64">, </tspan><tspan fill="#000000" font-size="5" x="108" y="64">e</tspan><tspan fill="#080808" font-size="5" x="111" y="64">)</tspan><tspan fill="#080808" font-size="5" x="9" y="70">}</tspan><tspan fill="#080808" font-size="5" x="9" y="77">......</tspan><tspan fill="#080808" font-size="5" x="0" y="83">}</tspan></text><path d="M0.333333-8.39823e-07 0.333422 35.0036-0.333245 35.0036-0.333333 8.39823e-07ZM4.00008 33.6702 0.000104987 41.6702-3.99991 33.6702Z" transform="matrix(1 0 0 -1 388.5 128.17)"/><path d="M507.5 51.1667 689.39 51.1668 689.39 51.8335 507.5 51.8334ZM688.057 47.5002 696.057 51.5002 688.057 55.5002Z"/><path d="M790.5 115.903C790.5 114.576 791.576 113.5 792.903 113.5L997.098 113.5C998.424 113.5 999.5 114.576 999.5 115.903L999.5 173.098C999.5 174.424 998.424 175.5 997.098 175.5L792.903 175.5C791.576 175.5 790.5 174.424 790.5 173.098Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(800.679 127)">type <tspan fill="#000000" font-size="5" x="15" y="0">HandlerFunc </tspan>func<tspan fill="#080808" font-size="5" x="63" y="0">(</tspan><tspan fill="#000000" font-size="5" x="66" y="0">ResponseWriter</tspan><tspan fill="#080808" font-size="5" x="108" y="0">, *</tspan><tspan fill="#000000" font-size="5" x="117" y="0">Request</tspan><tspan fill="#080808" font-size="5" x="138" y="0">)</tspan><tspan font-size="5" x="0" y="6">func </tspan><tspan fill="#080808" font-size="5" x="15" y="6">(</tspan><tspan fill="#000000" font-size="5" x="18" y="6">f HandlerFunc</tspan><tspan fill="#080808" font-size="5" x="57" y="6">) </tspan><tspan fill="#000000" font-size="5" x="63" y="6">ServeHTTP</tspan><tspan fill="#080808" font-size="5" x="90" y="6">(</tspan><tspan fill="#000000" font-size="5" x="93" y="6">w ResponseWriter</tspan><tspan fill="#080808" font-size="5" x="141" y="6">, </tspan><tspan fill="#000000" font-size="5" x="147" y="6">r </tspan><tspan fill="#080808" font-size="5" x="153" y="6">*</tspan><tspan fill="#000000" font-size="5" x="156" y="6">Request</tspan><tspan fill="#080808" font-size="5" x="177" y="6">) {</tspan><tspan fill="#000000" font-size="5" x="9" y="13">f</tspan><tspan fill="#080808" font-size="5" x="12" y="13">(</tspan><tspan fill="#000000" font-size="5" x="15" y="13">w</tspan><tspan fill="#080808" font-size="5" x="18" y="13">, </tspan><tspan fill="#000000" font-size="5" x="24" y="13">r</tspan><tspan fill="#080808" font-size="5" x="27" y="13">)</tspan><tspan fill="#080808" font-size="5" x="0" y="19">}</tspan><tspan font-size="5" x="0" y="26">type </tspan><tspan fill="#000000" font-size="5" x="15" y="26">Handler </tspan>interface <tspan fill="#080808" font-size="5" x="69" y="26">{</tspan><tspan fill="#286D73" font-size="5" x="9" y="32">ServeHTTP</tspan><tspan fill="#080808" font-size="5" x="36" y="32">(</tspan><tspan fill="#000000" font-size="5" x="39" y="32">ResponseWriter</tspan><tspan fill="#080808" font-size="5" x="81" y="32">, *</tspan><tspan fill="#000000" font-size="5" x="90" y="32">Request</tspan><tspan fill="#080808" font-size="5" x="111" y="32">)</tspan><tspan fill="#080808" font-size="5" x="0" y="38">}</tspan></text><path d="M23.5001 12.375C23.5001 10.2349 25.2349 8.50005 27.375 8.50005L292.625 8.50005C294.765 8.50005 296.5 10.2349 296.5 12.375L296.5 104.625C296.5 106.765 294.765 108.5 292.625 108.5L27.375 108.5C25.2349 108.5 23.5001 106.765 23.5001 104.625Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#8C8C8C" font-family="Consolas,Consolas_MSFontService,sans-serif" font-style="italic" font-weight="400" font-size="7" transform="translate(33.3298 20)">// 1.<tspan font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="7" x="18.3333" y="0">注册路由和回调函数</tspan><tspan font-size="7" x="0" y="8">// pattern</tspan><tspan font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="7" x="36.6667" y="8">：模式，即路由</tspan><tspan font-size="7" x="0" y="16">// handler</tspan><tspan font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="7" x="36.6667" y="16">：请求处理器，接收请求并完成响应</tspan><tspan fill="#805900" font-style="normal" font-size="7" x="0" y="24">http</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="14.6667" y="24">.</tspan><tspan fill="#36666B" font-style="normal" font-size="7" x="18.3333" y="24">HandleFunc</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="55" y="24">(</tspan><tspan fill="#067D17" font-style="normal" font-size="7" x="58.6667" y="24">"/"</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="69.6667" y="24">, </tspan><tspan fill="#0033B3" font-style="normal" font-size="7" x="77" y="24">func</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="91.6667" y="24">(</tspan><tspan fill="#000000" font-style="normal" font-size="7" x="95.3333" y="24">writer </tspan><tspan fill="#805900" font-style="normal" font-size="7" x="121" y="24">http</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="135.667" y="24">.</tspan><tspan fill="#336ECC" font-style="normal" font-size="7" x="139.333" y="24">ResponseWriter</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="190.667" y="24">, </tspan><tspan fill="#000000" font-style="normal" font-size="7" x="198" y="24">request </tspan><tspan fill="#080808" font-style="normal" font-size="7" x="0" y="32">*</tspan><tspan fill="#805900" font-style="normal" font-size="7" x="3.66666" y="32">http</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="18.3333" y="32">.</tspan><tspan fill="#336ECC" font-style="normal" font-size="7" x="22" y="32">Request</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="47.6667" y="32">) {</tspan><tspan fill="#000000" font-style="normal" font-size="7" x="11" y="40">writer</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="33" y="40">.</tspan><tspan fill="#36666B" font-style="normal" font-size="7" x="36.6667" y="40">Write</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="55" y="40">([]</tspan><tspan fill="#0033B3" font-style="normal" font-size="7" x="66" y="40">byte</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="80.6667" y="40">(</tspan><tspan fill="#067D17" font-style="normal" font-size="7" x="84.3333" y="40">"hello, this is server!"</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="172.333" y="40">))</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="0" y="48">})</tspan><tspan font-size="7" x="0" y="56">// 2.</tspan><tspan font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="7" x="18.3333" y="56">启动监听并提供服务</tspan><tspan font-size="7" x="0" y="64">// addr</tspan><tspan font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="7" x="25.6667" y="64">：服务器地址，格式：</tspan>host:port<tspan font-size="7" x="0" y="72">// handler</tspan><tspan font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="7" x="36.6667" y="72">：处理</tspan>HTTP<tspan font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="7" x="71.3333" y="72">请求的处理器，默认为</tspan>http.DefaultServeMux=&gt;ServeMux<tspan fill="#805900" font-style="normal" font-size="7" x="0" y="80">http</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="14.6667" y="80">.</tspan><tspan fill="#36666B" font-style="normal" font-size="7" x="18.3333" y="80">ListenAndServe</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="69.6667" y="80">(</tspan><tspan fill="#067D17" font-style="normal" font-size="7" x="73.3333" y="80">":9527"</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="99" y="80">, </tspan><tspan fill="#0033B3" font-style="normal" font-size="7" x="106.333" y="80">nil</tspan><tspan fill="#080808" font-style="normal" font-size="7" x="117.333" y="80">)</tspan></text><path d="M516.5 17.6626C516.5 17.0205 517.021 16.5001 517.663 16.5001L677.338 16.5001C677.98 16.5001 678.5 17.0205 678.5 17.6626L678.5 45.3375C678.5 45.9796 677.98 46.5001 677.338 46.5001L517.663 46.5001C517.021 46.5001 516.5 45.9796 516.5 45.3375Z" stroke="#FFD700" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#8C8C8C" font-family="Consolas,Consolas_MSFontService,sans-serif" font-style="italic" font-weight="400" font-size="5" transform="translate(525.908 27)">// <tspan fill="#525252" font-size="5" x="9" y="0">DefaultServeMux</tspan><tspan font-size="5" x="57" y="0">is used by </tspan><tspan fill="#525252" font-size="5" x="90" y="0">Serve</tspan>.<tspan fill="#0033B3" font-style="normal" font-size="5" x="0" y="6">var </tspan><tspan fill="#000000" font-style="normal" font-size="5" x="12" y="6">DefaultServeMux </tspan><tspan fill="#080808" font-style="normal" font-size="5" x="60" y="6">= &amp;</tspan><tspan fill="#000000" font-style="normal" font-size="5" x="69" y="6">defaultServeMux</tspan><tspan fill="#0033B3" font-style="normal" font-size="5" x="0" y="13">var </tspan><tspan fill="#000000" font-style="normal" font-size="5" x="12" y="13">defaultServeMux </tspan><tspan fill="#336ECC" font-style="normal" font-size="5" x="60" y="13">ServeMux</tspan></text><path d="M177 152 304.467 152 304.467 154 177 154ZM303.133 149 311.133 153 303.133 157Z" fill="#FF6B6B"/><text fill="#805900" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="7" transform="translate(181.099 145)">http<tspan fill="#080808" font-size="7" x="14.6667" y="0">.</tspan><tspan fill="#36666B" font-size="7" x="18.3333" y="0">HandleFunc</tspan><tspan fill="#080808" font-size="7" x="55" y="0">(</tspan><tspan fill="#080808" font-size="7" x="58.6667" y="0">pattern, handler)</tspan></text><path d="M306.5 20.1739C306.5 18.6972 307.697 17.5001 309.174 17.5001L504.826 17.5001C506.303 17.5001 507.5 18.6972 507.5 20.1739L507.5 83.8262C507.5 85.3029 506.303 86.5001 504.826 86.5001L309.174 86.5001C307.697 86.5001 306.5 85.3029 306.5 83.8262Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(316.364 27)">func <tspan fill="#286D73" font-size="5" x="15" y="0">HandleFunc</tspan><tspan fill="#080808" font-size="5" x="45" y="0">(</tspan><tspan fill="#000000" font-size="5" x="48" y="0">pattern </tspan>string<tspan fill="#080808" font-size="5" x="90" y="0">, </tspan><tspan fill="#000000" font-size="5" x="21" y="6">handler </tspan>func<tspan fill="#080808" font-size="5" x="57" y="6">(</tspan><tspan fill="#336ECC" font-size="5" x="60" y="6">ResponseWriter</tspan><tspan fill="#080808" font-size="5" x="102" y="6">, *</tspan><tspan fill="#336ECC" font-size="5" x="111" y="6">Request</tspan><tspan fill="#080808" font-size="5" x="132" y="6">)) {</tspan><tspan fill="#000000" font-size="5" x="9" y="13">DefaultServeMux</tspan><tspan fill="#080808" font-size="5" x="54" y="13">.</tspan><tspan fill="#36666B" font-size="5" x="57" y="13">HandleFunc</tspan><tspan fill="#080808" font-size="5" x="87" y="13">(</tspan><tspan fill="#000000" font-size="5" x="90" y="13">pattern</tspan><tspan fill="#080808" font-size="5" x="111" y="13">, </tspan><tspan fill="#000000" font-size="5" x="117" y="13">handler</tspan><tspan fill="#080808" font-size="5" x="138" y="13">)</tspan><tspan fill="#080808" font-size="5" x="0" y="19">}</tspan><tspan font-size="5" x="0" y="26">func </tspan><tspan fill="#080808" font-size="5" x="15" y="26">(</tspan><tspan fill="#008A91" font-size="5" x="18" y="26">mux </tspan><tspan fill="#080808" font-size="5" x="30" y="26">*</tspan><tspan fill="#336ECC" font-size="5" x="33" y="26">ServeMux</tspan><tspan fill="#080808" font-size="5" x="57" y="26">) </tspan><tspan fill="#286D73" font-size="5" x="63" y="26">HandleFunc</tspan><tspan fill="#080808" font-size="5" x="93" y="26">(</tspan><tspan fill="#000000" font-size="5" x="96" y="26">pattern </tspan>string<tspan fill="#080808" font-size="5" x="138" y="26">, </tspan><tspan fill="#000000" font-size="5" x="21" y="32">handler </tspan>func<tspan fill="#080808" font-size="5" x="57" y="32">(</tspan><tspan fill="#336ECC" font-size="5" x="60" y="32">ResponseWriter</tspan><tspan fill="#080808" font-size="5" x="102" y="32">, *</tspan><tspan fill="#336ECC" font-size="5" x="111" y="32">Request</tspan><tspan fill="#080808" font-size="5" x="132" y="32">)) {</tspan><tspan fill="#080808" font-size="5" x="9" y="38">......</tspan><tspan fill="#008A91" font-size="5" x="9" y="45">mux</tspan><tspan fill="#080808" font-size="5" x="18" y="45">.</tspan><tspan fill="#36666B" font-size="5" x="21" y="45">Handle</tspan><tspan fill="#080808" font-size="5" x="39" y="45">(</tspan><tspan fill="#000000" font-size="5" x="42" y="45">pattern</tspan><tspan fill="#080808" font-size="5" x="63" y="45">, </tspan><tspan fill="#336ECC" font-size="5" x="69" y="45">HandlerFunc</tspan><tspan fill="#080808" font-size="5" x="102" y="45">(</tspan><tspan fill="#000000" font-size="5" x="105" y="45">handler</tspan><tspan fill="#080808" font-size="5" x="126" y="45">))</tspan><tspan fill="#080808" font-size="5" x="0" y="51">}</tspan></text><path d="M465 152 589.484 152 589.484 154 465 154ZM588.151 149 596.151 153 588.151 157Z" fill="#FF6B6B"/><text fill="#336ECC" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="7" transform="translate(491.757 143)">HandlerFunc<tspan fill="#080808" font-size="7" x="40.3333" y="0">(</tspan><tspan fill="#000000" font-size="7" x="44" y="0">handler</tspan><tspan fill="#080808" font-size="7" x="69.6667" y="0">)</tspan></text><path d="M177.5 361.167 304.839 361.167 304.839 361.833 177.5 361.833ZM303.506 357.5 311.506 361.5 303.506 365.5Z"/><path d="M80 264.5 86.75 264.5 86.75 227 100.25 227 100.25 264.5 107 264.5 93.5 278Z" fill="#FF6B6B" fill-rule="evenodd"/><path d="M80 435.5 86.75 435.5 86.75 398 100.25 398 100.25 435.5 107 435.5 93.5 449Z" fill="#FF6B6B" fill-rule="evenodd"/><path d="M946.5 13.6777C946.5 11.9227 947.923 10.5001 949.678 10.5001L1232.32 10.5001C1234.08 10.5001 1235.5 11.9227 1235.5 13.6777L1235.5 89.3224C1235.5 91.0774 1234.08 92.5 1232.32 92.5L949.678 92.5C947.923 92.5 946.5 91.0774 946.5 89.3224Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(956.512 21)">func <tspan fill="#286D73" font-size="5" x="15" y="0">appendSorted</tspan><tspan fill="#080808" font-size="5" x="51" y="0">(</tspan><tspan fill="#000000" font-size="5" x="54" y="0">es </tspan><tspan fill="#080808" font-size="5" x="63" y="0">[]</tspan><tspan fill="#336ECC" font-size="5" x="68.9999" y="0">muxEntry</tspan><tspan fill="#080808" font-size="5" x="92.9999" y="0">, </tspan><tspan fill="#000000" font-size="5" x="98.9999" y="0">e </tspan><tspan fill="#336ECC" font-size="5" x="105" y="0">muxEntry</tspan><tspan fill="#080808" font-size="5" x="129" y="0">) []</tspan><tspan fill="#336ECC" font-size="5" x="141" y="0">muxEntry </tspan><tspan fill="#080808" font-size="5" x="168" y="0">{</tspan><tspan fill="#000000" font-size="5" x="9" y="6">n </tspan><tspan fill="#080808" font-size="5" x="15" y="6">:= </tspan>len<tspan fill="#080808" font-size="5" x="33" y="6">(</tspan><tspan fill="#000000" font-size="5" x="36" y="6">es</tspan><tspan fill="#080808" font-size="5" x="42" y="6">)</tspan><tspan fill="#000000" font-size="5" x="9" y="13">i </tspan><tspan fill="#080808" font-size="5" x="15" y="13">:= </tspan><tspan fill="#805900" font-size="5" x="24" y="13">sort</tspan><tspan fill="#080808" font-size="5" x="36" y="13">.</tspan><tspan fill="#36666B" font-size="5" x="39" y="13">Search</tspan><tspan fill="#080808" font-size="5" x="57" y="13">(</tspan><tspan fill="#000000" font-size="5" x="60" y="13">n</tspan><tspan fill="#080808" font-size="5" x="63" y="13">, </tspan><tspan font-size="5" x="68.9999" y="13">func</tspan><tspan fill="#080808" font-size="5" x="80.9999" y="13">(</tspan><tspan fill="#000000" font-size="5" x="83.9999" y="13">i </tspan>int<tspan fill="#080808" font-size="5" x="98.9999" y="13">) </tspan>bool <tspan fill="#080808" font-size="5" x="120" y="13">{</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="126" y="13">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="135" y="13">找到要插入的位置</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="180.667" y="13">i</tspan><tspan font-size="5" x="18" y="19">return len</tspan><tspan fill="#080808" font-size="5" x="48" y="19">(</tspan><tspan fill="#000000" font-size="5" x="51" y="19">es</tspan><tspan fill="#080808" font-size="5" x="57" y="19">[</tspan><tspan fill="#000000" font-size="5" x="60" y="19">i</tspan><tspan fill="#080808" font-size="5" x="63" y="19">].</tspan><tspan fill="#000000" font-size="5" x="68.9999" y="19">pattern</tspan><tspan fill="#080808" font-size="5" x="89.9999" y="19">) &lt; </tspan>len<tspan fill="#080808" font-size="5" x="111" y="19">(</tspan><tspan fill="#000000" font-size="5" x="114" y="19">e</tspan><tspan fill="#080808" font-size="5" x="117" y="19">.</tspan><tspan fill="#000000" font-size="5" x="120" y="19">pattern</tspan><tspan fill="#080808" font-size="5" x="141" y="19">)</tspan><tspan fill="#080808" font-size="5" x="9" y="26">})</tspan><tspan font-size="5" x="9" y="32">if </tspan><tspan fill="#000000" font-size="5" x="18" y="32">i </tspan><tspan fill="#080808" font-size="5" x="24" y="32">== </tspan><tspan fill="#000000" font-size="5" x="33" y="32">n </tspan><tspan fill="#080808" font-size="5" x="39" y="32">{</tspan><tspan font-size="5" x="45" y="32">return append</tspan><tspan fill="#080808" font-size="5" x="83.9999" y="32">(</tspan><tspan fill="#000000" font-size="5" x="86.9999" y="32">es</tspan><tspan fill="#080808" font-size="5" x="92.9999" y="32">, </tspan><tspan fill="#000000" font-size="5" x="98.9999" y="32">e</tspan><tspan fill="#080808" font-size="5" x="102" y="32">)}</tspan><tspan fill="#000000" font-size="5" x="9" y="38">es </tspan><tspan fill="#080808" font-size="5" x="18" y="38">= </tspan>append<tspan fill="#080808" font-size="5" x="42" y="38">(</tspan><tspan fill="#000000" font-size="5" x="45" y="38">es</tspan><tspan fill="#080808" font-size="5" x="51" y="38">, </tspan><tspan fill="#336ECC" font-size="5" x="57" y="38">muxEntry</tspan><tspan fill="#080808" font-size="5" x="80.9999" y="38">{}) </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="92.9999" y="38">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="102" y="38">让</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="110.333" y="38">es </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="119.333" y="38">增加一个空位，</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="156.667" y="38">len</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="168.667" y="38">= </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="174.667" y="38">len</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="186.667" y="38">+ 1</tspan><tspan font-size="5" x="9" y="45">copy</tspan><tspan fill="#080808" font-size="5" x="21" y="45">(</tspan><tspan fill="#000000" font-size="5" x="24" y="45">es</tspan><tspan fill="#080808" font-size="5" x="30" y="45">[</tspan><tspan fill="#000000" font-size="5" x="33" y="45">i</tspan><tspan fill="#080808" font-size="5" x="36" y="45">+</tspan><tspan fill="#1750EB" font-size="5" x="39" y="45">1</tspan><tspan fill="#080808" font-size="5" x="42" y="45">:], </tspan><tspan fill="#000000" font-size="5" x="54" y="45">es</tspan><tspan fill="#080808" font-size="5" x="60" y="45">[</tspan><tspan fill="#000000" font-size="5" x="63" y="45">i</tspan><tspan fill="#080808" font-size="5" x="66" y="45">:]) </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="92.9999" y="45">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="102" y="45">把元素</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="121" y="45">[</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="124" y="45">i</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="130" y="45">: len</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="145" y="45">-</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="148" y="45">1] </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="157" y="45">拷贝到</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="176" y="45">[i+1 : len</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="206" y="45">-</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="209" y="45">1]</tspan><tspan fill="#000000" font-size="5" x="9" y="51">es</tspan><tspan fill="#080808" font-size="5" x="15" y="51">[</tspan><tspan fill="#000000" font-size="5" x="18" y="51">i</tspan><tspan fill="#080808" font-size="5" x="21" y="51">] = </tspan><tspan fill="#000000" font-size="5" x="33" y="51">e</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="92.9999" y="51">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="102" y="51">给</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="110.333" y="51">i</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="116.333" y="51">位置赋值要插入的</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="159" y="51">元素</tspan><tspan font-size="5" x="9" y="58">return </tspan><tspan fill="#000000" font-size="5" x="30" y="58">es</tspan><tspan fill="#080808" font-size="5" x="0" y="64">}</tspan></text><path d="M1037.5 130.663C1037.5 130.021 1038.02 129.5 1038.66 129.5L1233.34 129.5C1233.98 129.5 1234.5 130.021 1234.5 130.663L1234.5 158.338C1234.5 158.98 1233.98 159.5 1233.34 159.5L1038.66 159.5C1038.02 159.5 1037.5 158.98 1037.5 158.338Z" stroke="#7F6C00" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(1046.68 139)">func<tspan fill="#080808" font-size="5" x="12" y="0">(</tspan><tspan fill="#000000" font-size="5" x="15" y="0">writer </tspan><tspan fill="#805900" font-size="5" x="36" y="0">http</tspan><tspan fill="#080808" font-size="5" x="48" y="0">.</tspan><tspan fill="#336ECC" font-size="5" x="51" y="0">ResponseWriter</tspan><tspan fill="#080808" font-size="5" x="93" y="0">, </tspan><tspan fill="#000000" font-size="5" x="99" y="0">request </tspan><tspan fill="#080808" font-size="5" x="123" y="0">*</tspan><tspan fill="#805900" font-size="5" x="126" y="0">http</tspan><tspan fill="#080808" font-size="5" x="138" y="0">.</tspan><tspan fill="#336ECC" font-size="5" x="141" y="0">Request</tspan><tspan fill="#080808" font-size="5" x="162" y="0">) {</tspan><tspan fill="#000000" font-size="5" x="9" y="6">writer</tspan><tspan fill="#080808" font-size="5" x="27" y="6">.</tspan><tspan fill="#36666B" font-size="5" x="30" y="6">Write</tspan><tspan fill="#080808" font-size="5" x="45" y="6">([]</tspan>byte<tspan fill="#080808" font-size="5" x="66" y="6">(</tspan><tspan fill="#067D17" font-size="5" x="69" y="6">"hello, this is server!"</tspan><tspan fill="#080808" font-size="5" x="141" y="6">))</tspan><tspan fill="#080808" font-size="5" x="0" y="13">})</tspan></text><path d="M999.5 144.167 1002.17 144.167 1002.17 144.833 999.5 144.833ZM1004.17 144.167 1006.83 144.167 1006.83 144.833 1004.17 144.833ZM1008.83 144.167 1011.5 144.167 1011.5 144.833 1008.83 144.833ZM1013.5 144.167 1016.17 144.167 1016.17 144.833 1013.5 144.833ZM1018.17 144.167 1020.83 144.167 1020.83 144.833 1018.17 144.833ZM1022.83 144.167 1025.5 144.167 1025.5 144.833 1022.83 144.833ZM1027.5 144.167 1030.17 144.167 1030.17 144.833 1027.5 144.833ZM1029.21 140.5 1037.21 144.5 1029.21 148.5Z" fill="#7F6C00"/><text fill="#336ECC" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="7" transform="translate(1004.56 137)">实现函数</text><path d="M311.5 344.895C311.5 344.125 312.125 343.5 312.895 343.5L506.105 343.5C506.875 343.5 507.5 344.125 507.5 344.895L507.5 378.105C507.5 378.876 506.875 379.5 506.105 379.5L312.895 379.5C312.125 379.5 311.5 378.876 311.5 378.105Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(320.845 353)">func <tspan fill="#286D73" font-size="5" x="15" y="0">ListenAndServe</tspan><tspan fill="#080808" font-size="5" x="57" y="0">(</tspan><tspan fill="#000000" font-size="5" x="60" y="0">addr </tspan>string<tspan fill="#080808" font-size="5" x="93" y="0">, </tspan><tspan fill="#000000" font-size="5" x="99" y="0">handler </tspan><tspan fill="#336ECC" font-size="5" x="123" y="0">Handler</tspan><tspan fill="#080808" font-size="5" x="144" y="0">) </tspan>error <tspan fill="#080808" font-size="5" x="168" y="0">{</tspan><tspan fill="#000000" font-size="5" x="9" y="6">server </tspan><tspan fill="#080808" font-size="5" x="30" y="6">:= &amp;</tspan><tspan fill="#336ECC" font-size="5" x="42" y="6">Server</tspan><tspan fill="#080808" font-size="5" x="60" y="6">{</tspan><tspan fill="#000000" font-size="5" x="63" y="6">Addr</tspan><tspan fill="#080808" font-size="5" x="75" y="6">: </tspan><tspan fill="#000000" font-size="5" x="81" y="6">addr</tspan><tspan fill="#080808" font-size="5" x="93" y="6">, </tspan><tspan fill="#000000" font-size="5" x="99" y="6">Handler</tspan><tspan fill="#080808" font-size="5" x="120" y="6">: </tspan><tspan fill="#000000" font-size="5" x="126" y="6">handler</tspan><tspan fill="#080808" font-size="5" x="147" y="6">}</tspan><tspan font-size="5" x="9" y="13">return </tspan><tspan fill="#000000" font-size="5" x="30" y="13">server</tspan><tspan fill="#080808" font-size="5" x="48" y="13">.</tspan><tspan fill="#36666B" font-size="5" x="51" y="13">ListenAndServe</tspan><tspan fill="#080808" font-size="5" x="93" y="13">()</tspan><tspan fill="#080808" font-size="5" x="0" y="19">}</tspan></text><path d="M659.5 217.901C659.5 213.814 662.814 210.5 666.901 210.5L869.099 210.5C873.186 210.5 876.5 213.814 876.5 217.901L876.5 394.099C876.5 398.186 873.186 401.5 869.099 401.5L666.901 401.5C662.814 401.5 659.5 398.186 659.5 394.099Z" stroke="#FFD700" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(665.068 218)">type <tspan fill="#000000" font-size="5" x="15" y="0">Server </tspan>struct <tspan fill="#080808" font-size="5" x="57" y="0">{</tspan><tspan fill="#000000" font-size="5" x="9" y="6">Addr </tspan>string<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="45" y="6">// </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="54" y="6">TCP </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="66" y="6">address</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="87" y="6">. </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="93" y="6">"host:port</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="123" y="6">"</tspan><tspan fill="#000000" font-size="5" x="9" y="13">Handler </tspan><tspan fill="#336ECC" font-size="5" x="33" y="13">Handler </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="57" y="13">// </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="66" y="13">http</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="78" y="13">.</tspan><tspan fill="#525252" font-style="italic" font-size="5" x="81" y="13">DefaultServeMux</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="129" y="13">if nil</tspan><tspan fill="#000000" font-size="5" x="9" y="19">TLSConfig </tspan><tspan fill="#080808" font-size="5" x="39" y="19">*</tspan><tspan fill="#805900" font-size="5" x="42" y="19">tls</tspan><tspan fill="#080808" font-size="5" x="51" y="19">.</tspan><tspan fill="#336ECC" font-size="5" x="54" y="19">Config</tspan><tspan fill="#000000" font-size="5" x="9" y="32">ReadTimeout </tspan><tspan fill="#805900" font-size="5" x="45" y="32">time</tspan><tspan fill="#080808" font-size="5" x="57" y="32">.</tspan><tspan fill="#336ECC" font-size="5" x="60" y="32">Duration</tspan><tspan fill="#000000" font-size="5" x="9" y="38">ReadHeaderTimeout </tspan><tspan fill="#805900" font-size="5" x="63" y="38">time</tspan><tspan fill="#080808" font-size="5" x="75" y="38">.</tspan><tspan fill="#336ECC" font-size="5" x="78" y="38">Duration</tspan><tspan fill="#000000" font-size="5" x="9" y="45">WriteTimeout </tspan><tspan fill="#805900" font-size="5" x="48" y="45">time</tspan><tspan fill="#080808" font-size="5" x="60" y="45">.</tspan><tspan fill="#336ECC" font-size="5" x="63" y="45">Duration</tspan><tspan fill="#000000" font-size="5" x="9" y="51">IdleTimeout </tspan><tspan fill="#805900" font-size="5" x="45" y="51">time</tspan><tspan fill="#080808" font-size="5" x="57" y="51">.</tspan><tspan fill="#336ECC" font-size="5" x="60" y="51">Duration</tspan><tspan fill="#000000" font-size="5" x="9" y="64">MaxHeaderBytes </tspan>int<tspan fill="#000000" font-size="5" x="9" y="70">TLSNextProto </tspan>map<tspan fill="#080808" font-size="5" x="57" y="70">[</tspan>string<tspan fill="#080808" font-size="5" x="78" y="70">]</tspan>func<tspan fill="#080808" font-size="5" x="93" y="70">(*</tspan><tspan fill="#336ECC" font-size="5" x="99" y="70">Server</tspan><tspan fill="#080808" font-size="5" x="117" y="70">, *</tspan><tspan fill="#805900" font-size="5" x="126" y="70">tls</tspan><tspan fill="#080808" font-size="5" x="135" y="70">.</tspan><tspan fill="#336ECC" font-size="5" x="138" y="70">Conn</tspan><tspan fill="#080808" font-size="5" x="150" y="70">, </tspan><tspan fill="#336ECC" font-size="5" x="156" y="70">Handler</tspan><tspan fill="#080808" font-size="5" x="177" y="70">)</tspan><tspan fill="#000000" font-size="5" x="9" y="77">ConnState </tspan>func<tspan fill="#080808" font-size="5" x="51" y="77">(</tspan><tspan fill="#805900" font-size="5" x="54" y="77">net</tspan><tspan fill="#080808" font-size="5" x="63" y="77">.</tspan><tspan fill="#336ECC" font-size="5" x="66" y="77">Conn</tspan><tspan fill="#080808" font-size="5" x="78" y="77">, </tspan><tspan fill="#336ECC" font-size="5" x="84" y="77">ConnState</tspan><tspan fill="#080808" font-size="5" x="111" y="77">)</tspan><tspan fill="#000000" font-size="5" x="9" y="83">ErroLog</tspan><tspan fill="#000000" font-size="5" x="33" y="83">*</tspan><tspan fill="#805900" font-size="5" x="36" y="83">log</tspan><tspan fill="#000000" font-size="5" x="45" y="83">.</tspan><tspan fill="#336ECC" font-size="5" x="48" y="83">Logger</tspan><tspan fill="#000000" font-size="5" x="9" y="96">BaseContext </tspan>func<tspan fill="#080808" font-size="5" x="57" y="96">(</tspan><tspan fill="#805900" font-size="5" x="60" y="96">net</tspan><tspan fill="#080808" font-size="5" x="69" y="96">.</tspan><tspan fill="#336ECC" font-size="5" x="72" y="96">Listener</tspan><tspan fill="#080808" font-size="5" x="96" y="96">) </tspan><tspan fill="#805900" font-size="5" x="102" y="96">context</tspan><tspan fill="#080808" font-size="5" x="123" y="96">.</tspan><tspan fill="#336ECC" font-size="5" x="126" y="96">Context</tspan><tspan fill="#000000" font-size="5" x="9" y="102">ConnContext </tspan>func<tspan fill="#080808" font-size="5" x="57" y="102">(</tspan><tspan fill="#000000" font-size="5" x="60" y="102">ctx </tspan><tspan fill="#805900" font-size="5" x="72" y="102">context</tspan><tspan fill="#080808" font-size="5" x="93" y="102">.</tspan><tspan fill="#336ECC" font-size="5" x="96" y="102">Context</tspan><tspan fill="#080808" font-size="5" x="117" y="102">, </tspan><tspan fill="#000000" font-size="5" x="123" y="102">c </tspan><tspan fill="#805900" font-size="5" x="129" y="102">net</tspan><tspan fill="#080808" font-size="5" x="138" y="102">.</tspan><tspan fill="#336ECC" font-size="5" x="141" y="102">Conn</tspan><tspan fill="#080808" font-size="5" x="153" y="102">) </tspan><tspan fill="#805900" font-size="5" x="159" y="102">context</tspan><tspan fill="#080808" font-size="5" x="180" y="102">.</tspan><tspan fill="#336ECC" font-size="5" x="183" y="102">Context</tspan><tspan fill="#000000" font-size="5" x="9" y="109">inShutdown </tspan><tspan fill="#336ECC" font-size="5" x="42" y="109">atomicBool </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="75" y="109">// true when server is in shutdown</tspan><tspan fill="#000000" font-size="5" x="9" y="122">disableKeepAlives </tspan>int32 <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="93" y="122">// accessed atomically.</tspan><tspan fill="#000000" font-size="5" x="9" y="128">nextProtoOnce </tspan><tspan fill="#805900" font-size="5" x="63" y="128">sync</tspan><tspan fill="#080808" font-size="5" x="75" y="128">.</tspan><tspan fill="#336ECC" font-size="5" x="78" y="128">Once </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="93" y="128">// guards setupHTTP2_* </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="162" y="128">init</tspan><tspan fill="#000000" font-size="5" x="9" y="134">nextProtoErr </tspan>error <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="93" y="134">// http2.ConfigureServer if used</tspan><tspan fill="#000000" font-size="5" x="9" y="147">mu </tspan><tspan fill="#805900" font-size="5" x="42" y="147">sync</tspan><tspan fill="#080808" font-size="5" x="54" y="147">.</tspan><tspan fill="#336ECC" font-size="5" x="57" y="147">Mutex</tspan><tspan fill="#000000" font-size="5" x="9" y="154">listeners </tspan>map<tspan fill="#080808" font-size="5" x="51" y="154">[*</tspan><tspan fill="#805900" font-size="5" x="57" y="154">net</tspan><tspan fill="#080808" font-size="5" x="66" y="154">.</tspan><tspan fill="#336ECC" font-size="5" x="69" y="154">Listener</tspan><tspan fill="#080808" font-size="5" x="93" y="154">]</tspan>struct<tspan fill="#080808" font-size="5" x="114" y="154">{}</tspan><tspan fill="#000000" font-size="5" x="9" y="160">activeConn </tspan>map<tspan fill="#080808" font-size="5" x="51" y="160">[*</tspan><tspan fill="#336ECC" font-size="5" x="57" y="160">conn</tspan><tspan fill="#080808" font-size="5" x="69" y="160">]</tspan>struct<tspan fill="#080808" font-size="5" x="90" y="160">{}</tspan><tspan fill="#000000" font-size="5" x="9" y="166">doneChan </tspan>chan struct<tspan fill="#080808" font-size="5" x="75" y="166">{}</tspan><tspan fill="#000000" font-size="5" x="9" y="173">onShutdown </tspan><tspan fill="#080808" font-size="5" x="42" y="173">[]</tspan>func<tspan fill="#080808" font-size="5" x="60" y="173">()</tspan><tspan fill="#080808" font-size="5" x="0" y="179">}</tspan></text><path d="M177 494 304.466 494 304.466 496 177 496ZM303.133 491 311.133 495 303.133 499Z" fill="#FF6B6B"/><text fill="#805900" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="7" transform="translate(183.331 350)">http<tspan fill="#080808" font-size="7" x="14.6667" y="0">.</tspan><tspan fill="#36666B" font-size="7" x="18.3333" y="0">ListenAndServe</tspan><tspan fill="#080808" font-size="7" x="69.6667" y="0">(</tspan><tspan fill="#067D17" font-size="7" x="73.3333" y="0">":9527"</tspan><tspan fill="#080808" font-size="7" x="99" y="0">, </tspan><tspan fill="#0033B3" font-size="7" x="106.333" y="0">nil</tspan><tspan fill="#080808" font-size="7" x="117.333" y="0">)</tspan></text><path d="M465 494 589.484 494 589.484 496 465 496ZM588.151 491 596.151 495 588.151 499Z" fill="#FF6B6B"/><text font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="7" transform="translate(201.728 484)">server<tspan fill="#080808" font-size="7" x="22" y="0">.</tspan><tspan fill="#36666B" font-size="7" x="25.6667" y="0">ListenAndServe</tspan><tspan fill="#080808" font-size="7" x="77" y="0">()</tspan></text><path d="M257.5 541.546C257.5 540.969 257.968 540.5 258.546 540.5L354.454 540.5C355.032 540.5 355.5 540.969 355.5 541.546L355.5 566.454C355.5 567.032 355.032 567.5 354.454 567.5L258.546 567.5C257.968 567.5 257.5 567.032 257.5 566.454Z" stroke="#FFD700" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(261.062 549)">type <tspan fill="#000000" font-size="5" x="15" y="0">TCPConn </tspan>struct <tspan fill="#080808" font-size="5" x="60" y="0">{</tspan><tspan fill="#336ECC" font-size="5" x="9" y="6">conn</tspan><tspan fill="#080808" font-size="5" x="0" y="13">}</tspan></text><path d="M22.5001 580.157C22.5001 577.033 25.033 574.5 28.1575 574.5L239.843 574.5C242.967 574.5 245.5 577.033 245.5 580.157L245.5 714.843C245.5 717.967 242.967 720.5 239.843 720.5L28.1575 720.5C25.033 720.5 22.5001 717.967 22.5001 714.843Z" stroke="#FFD700" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(27.0446 585)">type <tspan fill="#000000" font-size="5" x="15" y="0">Conn </tspan>interface <tspan fill="#080808" font-size="5" x="60" y="0">{</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="6">// </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="18" y="6">Read</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="33" y="6">reads data from the connection.</tspan><tspan fill="#286D73" font-size="5" x="9" y="13">Read</tspan><tspan fill="#080808" font-size="5" x="21" y="13">(</tspan><tspan fill="#000000" font-size="5" x="24" y="13">b </tspan><tspan fill="#080808" font-size="5" x="30" y="13">[]</tspan>byte<tspan fill="#080808" font-size="5" x="48" y="13">) (</tspan><tspan fill="#000000" font-size="5" x="57" y="13">n </tspan>int<tspan fill="#080808" font-size="5" x="72" y="13">, </tspan><tspan fill="#000000" font-size="5" x="78" y="13">err </tspan>error<tspan fill="#080808" font-size="5" x="105" y="13">)</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="19">// </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="18" y="19">Write</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="36" y="19">writes data to the connection.</tspan><tspan fill="#286D73" font-size="5" x="9" y="26">Write</tspan><tspan fill="#080808" font-size="5" x="24" y="26">(</tspan><tspan fill="#000000" font-size="5" x="27" y="26">b </tspan><tspan fill="#080808" font-size="5" x="33" y="26">[]</tspan>byte<tspan fill="#080808" font-size="5" x="51" y="26">) (</tspan><tspan fill="#000000" font-size="5" x="60" y="26">n </tspan>int<tspan fill="#080808" font-size="5" x="75" y="26">, </tspan><tspan fill="#000000" font-size="5" x="81" y="26">err </tspan>error<tspan fill="#080808" font-size="5" x="108" y="26">)</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="32">// </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="18" y="32">Close</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="36" y="32">closes the connection.</tspan><tspan fill="#286D73" font-size="5" x="9" y="38">Close</tspan><tspan fill="#080808" font-size="5" x="24" y="38">() </tspan>error<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="45">// </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="18" y="45">LocalAddr</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="48" y="45">returns the local network address, if known.</tspan><tspan fill="#286D73" font-size="5" x="9" y="51">LocalAddr</tspan><tspan fill="#080808" font-size="5" x="36" y="51">() </tspan><tspan fill="#336ECC" font-size="5" x="45" y="51">Addr</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="58">// </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="18" y="58">RemoteAddr</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="51" y="58">returns the remote network address, if known.</tspan><tspan fill="#286D73" font-size="5" x="9" y="64">RemoteAddr</tspan><tspan fill="#080808" font-size="5" x="39" y="64">() </tspan><tspan fill="#336ECC" font-size="5" x="48" y="64">Addr</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="70">// </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="18" y="70">SetDeadline</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="54" y="70">sets the read and write deadlines associated</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="77">// with the connection. </tspan><tspan fill="#286D73" font-size="5" x="9" y="83">SetDeadline</tspan><tspan fill="#080808" font-size="5" x="42" y="83">(</tspan><tspan fill="#000000" font-size="5" x="45" y="83">t </tspan><tspan fill="#805900" font-size="5" x="51" y="83">time</tspan><tspan fill="#080808" font-size="5" x="63" y="83">.</tspan><tspan fill="#336ECC" font-size="5" x="66" y="83">Time</tspan><tspan fill="#080808" font-size="5" x="78" y="83">) </tspan>error<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="90">// </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="18" y="90">SetReadDeadline</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="66" y="90">sets the deadline for future </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="153" y="90">Read</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="168" y="90">calls</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="96">// and any currently</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="69" y="96">-</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="72" y="96">blocked </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="96" y="96">Read</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="111" y="96">call.</tspan><tspan fill="#286D73" font-size="5" x="9" y="102">SetReadDeadline</tspan><tspan fill="#080808" font-size="5" x="54" y="102">(</tspan><tspan fill="#000000" font-size="5" x="57" y="102">t </tspan><tspan fill="#805900" font-size="5" x="63" y="102">time</tspan><tspan fill="#080808" font-size="5" x="75" y="102">.</tspan><tspan fill="#336ECC" font-size="5" x="78" y="102">Time</tspan><tspan fill="#080808" font-size="5" x="90" y="102">) </tspan>error<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="109">// </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="18" y="109">SetWriteDeadline</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="69" y="109">sets the deadline for future </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="156" y="109">Write</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="174" y="109">calls</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="115">// and any currently</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="69" y="115">-</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="72" y="115">blocked </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="96" y="115">Write</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="114" y="115">call.</tspan><tspan fill="#286D73" font-size="5" x="9" y="122">SetWriteDeadline</tspan><tspan fill="#080808" font-size="5" x="57" y="122">(</tspan><tspan fill="#000000" font-size="5" x="60" y="122">t </tspan><tspan fill="#805900" font-size="5" x="66" y="122">time</tspan><tspan fill="#080808" font-size="5" x="78" y="122">.</tspan><tspan fill="#336ECC" font-size="5" x="81" y="122">Time</tspan><tspan fill="#080808" font-size="5" x="93" y="122">) </tspan>error<tspan fill="#080808" font-size="5" x="0" y="128">}</tspan></text><path d="M257.5 590.585C257.5 589.986 257.986 589.5 258.585 589.5L354.415 589.5C355.014 589.5 355.5 589.986 355.5 590.585L355.5 616.415C355.5 617.014 355.014 617.5 354.415 617.5L258.585 617.5C257.986 617.5 257.5 617.014 257.5 616.415Z" stroke="#FFD700" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(261.062 598)">type <tspan fill="#000000" font-size="5" x="15" y="0">conn </tspan><tspan font-size="5" x="30" y="0">struct </tspan><tspan fill="#080808" font-size="5" x="51" y="0">{</tspan><tspan fill="#000000" font-size="5" x="9" y="6">fd </tspan><tspan fill="#080808" font-size="5" x="18" y="6">*</tspan><tspan fill="#336ECC" font-size="5" x="21" y="6">netFD</tspan><tspan fill="#080808" font-size="5" x="0" y="13">}</tspan></text><path d="M307.167 567.5 307.167 572.833 305.833 572.833 305.833 567.5ZM307.167 576.833 307.167 582.167 305.833 582.167 305.833 576.833ZM307.167 586.167 307.167 588.31 305.833 588.31 305.833 586.167ZM311.743 580.646 306.5 589.633 301.258 580.646C301.072 580.328 301.18 579.92 301.498 579.734 301.816 579.549 302.224 579.656 302.409 579.974L307.076 587.974 305.924 587.974 310.591 579.974C310.776 579.656 311.185 579.549 311.503 579.734 311.821 579.92 311.928 580.328 311.743 580.646Z" fill="#FFD700"/><path d="M257.5 643.6C257.5 641.888 258.888 640.5 260.6 640.5L352.4 640.5C354.112 640.5 355.5 641.888 355.5 643.6L355.5 717.4C355.5 719.112 354.112 720.5 352.4 720.5L260.6 720.5C258.888 720.5 257.5 719.112 257.5 717.4Z" stroke="#FFD700" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(261.304 650)">type <tspan fill="#000000" font-size="5" x="15" y="0">netFD </tspan>struct <tspan fill="#080808" font-size="5" x="54" y="0">{</tspan><tspan fill="#000000" font-size="5" x="9" y="6">pfd </tspan><tspan fill="#805900" font-size="5" x="21" y="6">poll</tspan><tspan fill="#080808" font-size="5" x="33" y="6">.</tspan><tspan fill="#336ECC" font-size="5" x="36" y="6">FD</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="19">// immutable until </tspan><tspan fill="#525252" font-style="italic" font-size="5" x="66" y="19">Close</tspan><tspan fill="#000000" font-size="5" x="9" y="26">family </tspan>int<tspan fill="#000000" font-size="5" x="9" y="32">sotype </tspan>int<tspan fill="#000000" font-size="5" x="9" y="38">isConnected </tspan>bool<tspan fill="#000000" font-size="5" x="9" y="45">net </tspan>string<tspan fill="#000000" font-size="5" x="9" y="51">laddr </tspan><tspan fill="#336ECC" font-size="5" x="45" y="51">Addr</tspan><tspan fill="#000000" font-size="5" x="9" y="58">raddr </tspan><tspan fill="#336ECC" font-size="5" x="45" y="58">Addr</tspan><tspan fill="#080808" font-size="5" x="0" y="64">}</tspan></text><path d="M0.666587-0.0103248 0.749185 5.32237-0.583988 5.34302-0.666587 0.0103248ZM0.811135 9.32189 0.893733 14.6546-0.43944 14.6752-0.522039 9.34254ZM0.955682 18.6541 1.00257 21.6815-0.330599 21.7021-0.377491 18.6748ZM5.45918 13.9475 0.356478 23.0147-5.0246 14.1098C-5.21502 13.7947-5.11393 13.3849-4.79881 13.1945-4.48369 13.004-4.07386 13.1051-3.88344 13.4203L0.906568 21.347-0.244999 21.3649 4.29721 13.2935C4.47778 12.9727 4.88428 12.8589 5.20515 13.0395 5.52602 13.2201 5.63975 13.6266 5.45918 13.9475Z" fill="#FFD700" transform="matrix(-1 0 0 1 306.856 617.5)"/><rect x="311.5" y="470.5" width="154" height="50" stroke="#FFC4C4" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="13" transform="translate(337.771 500)">3.1.启动<tspan font-size="13" x="48.6667" y="0">TCP</tspan><tspan font-size="13" x="73.5" y="0">监听</tspan></text><path d="M366.5 582.941C366.5 581.593 367.593 580.5 368.941 580.5L558.059 580.5C559.407 580.5 560.5 581.593 560.5 582.941L560.5 641.059C560.5 642.407 559.407 643.5 558.059 643.5L368.941 643.5C367.593 643.5 366.5 642.407 366.5 641.059Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(376.49 591)">func <tspan fill="#080808" font-size="5" x="15" y="0">(</tspan><tspan fill="#008A91" font-size="5" x="18" y="0">srv </tspan><tspan fill="#080808" font-size="5" x="30" y="0">*</tspan><tspan fill="#336ECC" font-size="5" x="33" y="0">Server</tspan><tspan fill="#080808" font-size="5" x="51" y="0">) </tspan><tspan fill="#286D73" font-size="5" x="57" y="0">ListenAndServe</tspan><tspan fill="#080808" font-size="5" x="99" y="0">() </tspan>error <tspan fill="#080808" font-size="5" x="126" y="0">{</tspan><tspan fill="#080808" font-size="5" x="9" y="6">......</tspan><tspan fill="#000000" font-size="5" x="9" y="13">ln</tspan><tspan fill="#080808" font-size="5" x="15" y="13">, </tspan><tspan fill="#000000" font-size="5" x="21" y="13">err </tspan><tspan fill="#080808" font-size="5" x="33" y="13">:= </tspan><tspan fill="#805900" font-size="5" x="42" y="13">net</tspan><tspan fill="#080808" font-size="5" x="51" y="13">.</tspan><tspan fill="#36666B" font-size="5" x="54" y="13">Listen</tspan><tspan fill="#080808" font-size="5" x="72" y="13">(</tspan><tspan fill="#067D17" font-family="Calibri,Calibri_MSFontService,sans-serif" font-size="5" x="75" y="13">“</tspan><tspan fill="#067D17" font-size="5" x="77.1667" y="13">tcp</tspan><tspan fill="#067D17" font-family="Calibri,Calibri_MSFontService,sans-serif" font-size="5" x="86.1667" y="13">”</tspan><tspan fill="#080808" font-size="5" x="88.3333" y="13">, </tspan><tspan fill="#000000" font-size="5" x="94.3333" y="13">addr</tspan><tspan fill="#080808" font-size="5" x="106.333" y="13">)</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="112.333" y="13">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="121.333" y="13">联网方式：</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="148" y="13">tcp</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="160" y="13">协议</tspan><tspan font-size="5" x="9" y="19">if </tspan><tspan fill="#000000" font-size="5" x="18" y="19">err </tspan><tspan fill="#080808" font-size="5" x="30" y="19">!= </tspan>nil <tspan fill="#080808" font-size="5" x="51" y="19">{</tspan><tspan font-size="5" x="18" y="26">return </tspan><tspan fill="#000000" font-size="5" x="39" y="26">err</tspan><tspan fill="#080808" font-size="5" x="9" y="32">}</tspan><tspan font-size="5" x="9" y="38">return </tspan><tspan fill="#008A91" font-size="5" x="30" y="38">srv</tspan><tspan fill="#080808" font-size="5" x="39" y="38">.</tspan><tspan fill="#36666B" font-size="5" x="42" y="38">Serve</tspan><tspan fill="#080808" font-size="5" x="57" y="38">(</tspan><tspan fill="#000000" font-size="5" x="60" y="38">ln</tspan><tspan fill="#080808" font-size="5" x="66" y="38">)</tspan><tspan fill="#080808" font-size="5" x="0" y="45">}</tspan></text><path d="M418.833 520.5 418.833 573.789 418.167 573.789 418.167 520.5ZM422.5 572.455 418.5 580.455 414.5 572.455Z"/><text font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="7" transform="translate(424.16 550)">server<tspan fill="#080808" font-size="7" x="22" y="0">.</tspan><tspan fill="#36666B" font-size="7" x="25.6667" y="0">ListenAndServe</tspan><tspan fill="#080808" font-size="7" x="77" y="0">()</tspan></text><path d="M366.5 659.941C366.5 658.593 367.593 657.5 368.941 657.5L558.059 657.5C559.407 657.5 560.5 658.593 560.5 659.941L560.5 718.059C560.5 719.407 559.407 720.5 558.059 720.5L368.941 720.5C367.593 720.5 366.5 719.407 366.5 718.059Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(376.134 668)">func <tspan fill="#080808" font-size="5" x="15" y="0">(</tspan><tspan fill="#008A91" font-size="5" x="18" y="0">srv </tspan><tspan fill="#080808" font-size="5" x="30" y="0">*</tspan><tspan fill="#336ECC" font-size="5" x="33" y="0">Server</tspan><tspan fill="#080808" font-size="5" x="51" y="0">) </tspan><tspan fill="#286D73" font-size="5" x="57" y="0">newConn</tspan><tspan fill="#080808" font-size="5" x="78" y="0">(</tspan><tspan fill="#000000" font-size="5" x="81" y="0">rwc </tspan><tspan fill="#805900" font-size="5" x="93" y="0">net</tspan><tspan fill="#080808" font-size="5" x="102" y="0">.</tspan><tspan fill="#336ECC" font-size="5" x="105" y="0">Conn</tspan><tspan fill="#080808" font-size="5" x="117" y="0">) *</tspan><tspan fill="#336ECC" font-size="5" x="126" y="0">conn </tspan><tspan fill="#080808" font-size="5" x="141" y="0">{</tspan><tspan fill="#000000" font-size="5" x="9" y="6">c </tspan><tspan fill="#080808" font-size="5" x="15" y="6">:= &amp;</tspan><tspan fill="#336ECC" font-size="5" x="27" y="6">conn</tspan><tspan fill="#080808" font-size="5" x="39" y="6">{</tspan><tspan fill="#000000" font-size="5" x="18" y="13">server</tspan><tspan fill="#080808" font-size="5" x="36" y="13">: </tspan><tspan fill="#008A91" font-size="5" x="42" y="13">srv</tspan><tspan fill="#080808" font-size="5" x="51" y="13">,</tspan><tspan fill="#000000" font-size="5" x="18" y="19">rwc</tspan><tspan fill="#080808" font-size="5" x="27" y="19">: </tspan><tspan fill="#000000" font-size="5" x="42" y="19">rwc</tspan><tspan fill="#080808" font-size="5" x="51" y="19">,</tspan><tspan fill="#080808" font-size="5" x="9" y="26">}</tspan><tspan fill="#080808" font-size="5" x="9" y="32">......</tspan><tspan font-size="5" x="9" y="38">return </tspan><tspan fill="#000000" font-size="5" x="30" y="38">c</tspan><tspan fill="#080808" font-size="5" x="0" y="45">}</tspan></text><path d="M750.5 153.167 784.528 153.167 784.528 153.833 750.5 153.833ZM783.195 149.5 791.195 153.5 783.195 157.5Z"/><text fill="#7F6C00" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="9" transform="translate(24.5604 45)">⊕<tspan font-size="9" x="134.244" y="56">⊕</tspan></text><path d="M169.5 98.1667 172.167 98.1667 172.167 98.8334 169.5 98.8334ZM174.167 98.1667 176.833 98.1667 176.833 98.8334 174.167 98.8334ZM178.833 98.1667 181.5 98.1667 181.5 98.8334 178.833 98.8334ZM183.5 98.1667 186.167 98.1667 186.167 98.8334 183.5 98.8334ZM188.167 98.1667 190.833 98.1667 190.833 98.8334 188.167 98.8334ZM192.833 98.1667 195.5 98.1667 195.5 98.8334 192.833 98.8334ZM197.5 98.1667 200.167 98.1667 200.167 98.8334 197.5 98.8334ZM202.167 98.1667 204.833 98.1667 204.833 98.8334 202.167 98.8334ZM206.833 98.1667 209.5 98.1667 209.5 98.8334 206.833 98.8334ZM211.5 98.1667 214.167 98.1667 214.167 98.8334 211.5 98.8334ZM216.167 98.1667 218.833 98.1667 218.833 98.8334 216.167 98.8334ZM220.833 98.1667 223.5 98.1667 223.5 98.8334 220.833 98.8334ZM225.5 98.1667 228.167 98.1667 228.167 98.8334 225.5 98.8334ZM230.167 98.1667 232.833 98.1667 232.833 98.8334 230.167 98.8334ZM234.833 98.1667 237.5 98.1667 237.5 98.8334 234.833 98.8334ZM239.5 98.1667 242.167 98.1667 242.167 98.8334 239.5 98.8334ZM244.217 98.7832 244.217 101.45 243.55 101.45 243.55 98.7832ZM244.217 103.45 244.217 106.117 243.55 106.117 243.55 103.45ZM244.217 108.117 244.217 110.783 243.55 110.783 243.55 108.117ZM244.217 112.783 244.217 115.45 243.55 115.45 243.55 112.783ZM244.217 117.45 244.217 120.117 243.55 120.117 243.55 117.45ZM244.217 122.117 244.217 124.783 243.55 124.783 243.55 122.117ZM244.217 126.783 244.217 129.45 243.55 129.45 243.55 126.783ZM244.217 131.45 244.217 134.117 243.55 134.117 243.55 131.45ZM244.217 136.117 244.217 138.783 243.55 138.783 243.55 136.117ZM244.217 140.783 244.217 143.45 243.55 143.45 243.55 140.783ZM244.217 145.45 244.217 148.117 243.55 148.117 243.55 145.45ZM244.217 150.117 244.217 152.783 243.55 152.783 243.55 150.117ZM244.217 154.783 244.217 157.45 243.55 157.45 243.55 154.783ZM244.217 159.45 244.217 162.117 243.55 162.117 243.55 159.45ZM244.217 164.117 244.217 166.783 243.55 166.783 243.55 164.117ZM244.217 168.783 244.217 171.45 243.55 171.45 243.55 168.783ZM244.217 173.45 244.217 176.117 243.55 176.117 243.55 173.45ZM244.217 178.117 244.217 180.783 243.55 180.783 243.55 178.117ZM244.217 182.783 244.217 185.45 243.55 185.45 243.55 182.783ZM244.217 187.45 244.217 190.117 243.55 190.117 243.55 187.45ZM244.217 192.117 244.217 194.783 243.55 194.783 243.55 192.117ZM244.217 196.783 244.217 199.45 243.55 199.45 243.55 196.783ZM244.217 201.45 244.217 204.117 243.55 204.117 243.55 201.45ZM244.217 206.117 244.217 208.783 243.55 208.783 243.55 206.117ZM244.217 210.783 244.217 213.45 243.55 213.45 243.55 210.783ZM244.217 215.45 244.217 218.117 243.55 218.117 243.55 215.45ZM244.217 220.117 244.217 222.783 243.55 222.783 243.55 220.117ZM244.217 224.783 244.217 227.45 243.55 227.45 243.55 224.783ZM244.217 229.45 244.217 232.117 243.55 232.117 243.55 229.45ZM244.217 234.117 244.217 236.783 243.55 236.783 243.55 234.117ZM244.217 238.783 244.217 241.45 243.55 241.45 243.55 238.783ZM244.217 243.45 244.217 246.117 243.55 246.117 243.55 243.45ZM244.217 248.117 244.217 250.783 243.55 250.783 243.55 248.117ZM244.217 252.783 244.217 255.45 243.55 255.45 243.55 252.783ZM244.217 257.45 244.217 260.117 243.55 260.117 243.55 257.45ZM244.217 262.117 244.217 264.783 243.55 264.783 243.55 262.117ZM244.217 266.783 244.217 269.45 243.55 269.45 243.55 266.783ZM244.217 271.45 244.217 274.117 243.55 274.117 243.55 271.45ZM244.217 276.117 244.217 278.783 243.55 278.783 243.55 276.117ZM244.217 280.783 244.217 283.45 243.55 283.45 243.55 280.783ZM244.217 285.45 244.217 288.117 243.55 288.117 243.55 285.45ZM244.217 290.117 244.217 292.783 243.55 292.783 243.55 290.117ZM244.217 294.783 244.217 297.45 243.55 297.45 243.55 294.783ZM244.217 299.45 244.217 302.117 243.55 302.117 243.55 299.45ZM244.217 304.117 244.217 306.783 243.55 306.783 243.55 304.117ZM244.217 308.783 244.217 311.45 243.55 311.45 243.55 308.783ZM244.217 313.45 244.217 316.117 243.55 316.117 243.55 313.45ZM244.217 318.117 244.217 320.783 243.55 320.783 243.55 318.117ZM244.217 322.783 244.217 325.45 243.55 325.45 243.55 322.783ZM244.217 327.45 244.217 330.117 243.55 330.117 243.55 327.45ZM244.217 332.117 244.217 333.16 243.55 333.16 243.55 332.117ZM247.884 331.827 243.884 339.827 239.884 331.827Z" fill="#7F6C00"/><text fill="#7F6C00" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="9" transform="translate(321.18 367)">⊕</text><path d="M325.869 369.5 325.869 372.167 325.202 372.167 325.202 369.5ZM325.869 374.167 325.869 376.833 325.202 376.833 325.202 374.167ZM325.869 378.833 325.869 381.5 325.202 381.5 325.202 378.833ZM325.869 383.5 325.869 386.167 325.202 386.167 325.202 383.5ZM325.869 388.167 325.869 390.833 325.202 390.833 325.202 388.167ZM325.869 392.833 325.869 395.5 325.202 395.5 325.202 392.833ZM325.869 397.5 325.869 400.167 325.202 400.167 325.202 397.5ZM325.869 402.167 325.869 404.833 325.202 404.833 325.202 402.167ZM325.869 406.833 325.869 409.5 325.202 409.5 325.202 406.833ZM325.869 411.5 325.869 414.167 325.202 414.167 325.202 411.5ZM325.869 416.167 325.869 418.833 325.202 418.833 325.202 416.167ZM325.869 420.833 325.869 422.076 323.778 422.076 323.778 421.409 325.536 421.409 325.202 421.742 325.202 420.833ZM321.778 422.076 319.112 422.076 319.112 421.409 321.778 421.409ZM317.112 422.076 314.445 422.076 314.445 421.409 317.112 421.409ZM312.445 422.076 309.778 422.076 309.778 421.409 312.445 421.409ZM307.778 422.076 305.112 422.076 305.112 421.409 307.778 421.409ZM303.112 422.076 300.445 422.076 300.445 421.409 303.112 421.409ZM298.445 422.076 295.778 422.076 295.778 421.409 298.445 421.409ZM293.778 422.076 291.112 422.076 291.112 421.409 293.778 421.409ZM289.112 422.076 286.445 422.076 286.445 421.409 289.112 421.409ZM284.445 422.076 281.778 422.076 281.778 421.409 284.445 421.409ZM279.778 422.076 277.112 422.076 277.112 421.409 279.778 421.409ZM275.112 422.076 272.445 422.076 272.445 421.409 275.112 421.409ZM270.445 422.076 267.778 422.076 267.778 421.409 270.445 421.409ZM265.778 422.076 263.112 422.076 263.112 421.409 265.778 421.409ZM261.112 422.076 258.445 422.076 258.445 421.409 261.112 421.409ZM256.445 422.076 253.778 422.076 253.778 421.409 256.445 421.409ZM251.778 422.076 249.112 422.076 249.112 421.409 251.778 421.409ZM247.112 422.076 244.5 422.076 244.833 421.742 244.833 421.798 244.167 421.798 244.167 421.409 247.112 421.409ZM244.833 423.798 244.833 426.464 244.167 426.464 244.167 423.798ZM244.833 428.464 244.833 431.131 244.167 431.131 244.167 428.464ZM244.833 433.131 244.833 435.798 244.167 435.798 244.167 433.131ZM244.833 437.798 244.833 440.464 244.167 440.464 244.167 437.798ZM244.833 442.464 244.833 445.131 244.167 445.131 244.167 442.464ZM244.833 447.131 244.833 449.798 244.167 449.798 244.167 447.131ZM244.833 451.798 244.833 454.464 244.167 454.464 244.167 451.798ZM244.833 456.464 244.833 459.131 244.167 459.131 244.167 456.464ZM244.833 461.131 244.833 463.798 244.167 463.798 244.167 461.131ZM244.833 465.798 244.833 467.318 244.167 467.318 244.167 465.798ZM248.5 465.985 244.5 473.985 240.5 465.985Z" fill="#7F6C00"/><rect x="596.5" y="470.5" width="154" height="50" stroke="#FFC4C4" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="13" transform="translate(635.125 492)">3.2.连接成功<tspan font-size="13" x="11" y="16">新建协程</tspan><tspan fill="#7F6C00" font-size="9" x="-233.48" y="-413">⊕</tspan></text><path d="M0-0.333333 2.66667-0.333333 2.66667 0.333333 0 0.333333ZM4.66667-0.333333 7.33333-0.333333 7.33333 0.333333 4.66667 0.333333ZM9.33333-0.333333 12-0.333333 12 0.333333 9.33333 0.333333ZM14-0.333333 16.6667-0.333333 16.6667 0.333333 14 0.333333ZM18.6667-0.333333 21.3333-0.333333 21.3333 0.333333 18.6667 0.333333ZM23.3333-0.333333 26-0.333333 26 0.333333 23.3333 0.333333ZM28-0.333333 30.6667-0.333333 30.6667 0.333333 28 0.333333ZM32.6667-0.333333 35.3333-0.333333 35.3333 0.333333 32.6667 0.333333ZM37.3333-0.333333 40-0.333333 40 0.333333 37.3333 0.333333ZM42-0.333333 44.6667-0.333333 44.6667 0.333333 42 0.333333ZM46.6667-0.333333 49.3333-0.333333 49.3333 0.333333 46.6667 0.333333ZM51.3333-0.333333 54-0.333333 54 0.333333 51.3333 0.333333ZM56-0.333333 58.6667-0.333333 58.6667 0.333333 56 0.333333ZM60.2507 0.749291 60.2507 3.41596 59.584 3.41596 59.584 0.749291ZM60.2507 5.41596 60.2507 8.08262 59.584 8.08262 59.584 5.41596ZM60.2507 10.0826 60.2507 12.7493 59.584 12.7493 59.584 10.0826ZM60.2507 14.7493 60.2507 17.416 59.584 17.416 59.584 14.7493ZM60.2507 19.416 60.2507 22.0826 59.584 22.0826 59.584 19.416ZM60.2507 24.0826 60.2507 26.7493 59.584 26.7493 59.584 24.0826ZM60.2507 28.7493 60.2507 31.416 59.584 31.416 59.584 28.7493ZM60.2507 33.416 60.2507 36.0826 59.584 36.0826 59.584 33.416ZM60.2507 38.0826 60.2507 40.7493 59.584 40.7493 59.584 38.0826ZM60.2507 42.7493 60.2507 45.416 59.584 45.416 59.584 42.7493ZM60.2507 47.416 60.2507 50.0826 59.584 50.0826 59.584 47.416ZM60.2507 52.0826 60.2507 54.7493 59.584 54.7493 59.584 52.0826ZM60.2507 56.7493 60.2507 59.416 59.584 59.416 59.584 56.7493ZM60.2507 61.416 60.2507 64.0826 59.584 64.0826 59.584 61.416ZM60.2507 66.0826 60.2507 67.7437 59.584 67.7437 59.584 66.0826ZM63.9174 66.4104 59.9174 74.4104 55.9174 66.4104Z" fill="#7F6C00" transform="matrix(1.83697e-16 1 1 -1.83697e-16 405.5 82.5001)"/><path d="M0-0.333333 2.66667-0.333333 2.66667 0.333333 0 0.333333ZM4.66667-0.333333 7.33333-0.333333 7.33333 0.333333 4.66667 0.333333ZM9.33333-0.333333 12-0.333333 12 0.333333 9.33333 0.333333ZM14-0.333333 16.6667-0.333333 16.6667 0.333333 14 0.333333ZM18.6667-0.333333 21.3333-0.333333 21.3333 0.333333 18.6667 0.333333ZM23.3333-0.333333 26-0.333333 26 0.333333 23.3333 0.333333ZM28-0.333333 30.6667-0.333333 30.6667 0.333333 28 0.333333ZM32.6667-0.333333 35.3333-0.333333 35.3333 0.333333 32.6667 0.333333ZM37.3333-0.333333 40-0.333333 40 0.333333 37.3333 0.333333ZM42-0.333333 44.6667-0.333333 44.6667 0.333333 42 0.333333ZM46.6667-0.333333 49.3333-0.333333 49.3333 0.333333 46.6667 0.333333ZM51.3333-0.333333 54-0.333333 54 0.333333 51.3333 0.333333ZM56-0.333333 58.6667-0.333333 58.6667 0.333333 56 0.333333ZM60.6667-0.333333 63.3333-0.333333 63.3333 0.333333 60.6667 0.333333ZM65.3333-0.333333 68-0.333333 68 0.333333 65.3333 0.333333ZM70.333 0.000282152 70.333 2.66695 69.6664 2.66695 69.6664 0.000282152ZM70.333 4.66695 70.333 7.33362 69.6664 7.33362 69.6664 4.66695ZM70.333 9.33362 70.333 12.0003 69.6664 12.0003 69.6664 9.33362ZM70.333 14.0003 70.333 16.6669 69.6664 16.6669 69.6664 14.0003ZM70.333 18.6669 70.333 21.3336 69.6664 21.3336 69.6664 18.6669ZM70.333 23.3336 70.333 26.0003 69.6664 26.0003 69.6664 23.3336ZM70.333 28.0003 70.333 30.6669 69.6664 30.6669 69.6664 28.0003ZM70.333 32.6669 70.333 35.3336 69.6664 35.3336 69.6664 32.6669ZM70.333 37.3336 70.333 40.0003 69.6664 40.0003 69.6664 37.3336ZM70.333 42.0003 70.333 44.6669 69.6664 44.6669 69.6664 42.0003ZM70.333 46.6669 70.333 49.3336 69.6664 49.3336 69.6664 46.6669ZM70.333 51.3336 70.333 54.0003 69.6664 54.0003 69.6664 51.3336ZM70.333 56.0003 70.333 58.6669 69.6664 58.6669 69.6664 56.0003ZM70.333 60.6669 70.333 63.3336 69.6664 63.3336 69.6664 60.6669ZM70.333 65.3336 70.333 68.0003 69.6664 68.0003 69.6664 65.3336ZM70.333 70.0003 70.333 72.6669 69.6664 72.6669 69.6664 70.0003ZM70.333 74.6669 70.333 77.3336 69.6664 77.3336 69.6664 74.6669ZM70.333 79.3336 70.333 82.0003 69.6664 82.0003 69.6664 79.3336ZM70.333 84.0003 70.333 86.6669 69.6664 86.6669 69.6664 84.0003ZM70.333 88.6669 70.333 91.3336 69.6664 91.3336 69.6664 88.6669ZM70.333 93.3336 70.333 96.0003 69.6664 96.0003 69.6664 93.3336ZM70.333 98.0003 70.333 100.667 69.6664 100.667 69.6664 98.0003ZM70.333 102.667 70.333 105.334 69.6664 105.334 69.6664 102.667ZM70.333 107.334 70.333 110 69.6664 110 69.6664 107.334ZM70.333 112 70.333 114.667 69.6664 114.667 69.6664 112ZM70.333 116.667 70.333 119.334 69.6664 119.334 69.6664 116.667ZM70.333 121.334 70.333 124 69.6664 124 69.6664 121.334ZM70.333 126 70.333 128.667 69.6664 128.667 69.6664 126ZM70.333 130.667 70.333 133.334 69.6664 133.334 69.6664 130.667ZM70.333 135.334 70.333 138 69.6664 138 69.6664 135.334ZM70.333 140 70.333 142.667 69.6664 142.667 69.6664 140ZM70.333 144.667 70.333 147.334 69.6664 147.334 69.6664 144.667ZM70.333 149.334 70.333 152 69.6664 152 69.6664 149.334ZM70.333 154 70.333 156.667 69.6664 156.667 69.6664 154ZM70.333 158.667 70.333 161.334 69.6664 161.334 69.6664 158.667ZM70.333 163.334 70.333 166 69.6664 166 69.6664 163.334ZM70.333 168 70.333 170.667 69.6664 170.667 69.6664 168ZM70.333 172.667 70.333 175.334 69.6664 175.334 69.6664 172.667ZM70.333 177.334 70.333 180 69.6664 180 69.6664 177.334ZM70.333 182 70.333 184.667 69.6664 184.667 69.6664 182ZM70.333 186.667 70.333 189.334 69.6664 189.334 69.6664 186.667ZM70.333 191.334 70.333 193.899 69.9997 193.565 70.1013 193.565 70.1013 194.232 69.6664 194.232 69.6664 191.334ZM72.1013 193.565 74.768 193.565 74.768 194.232 72.1013 194.232ZM76.768 193.565 79.4346 193.565 79.4346 194.232 76.768 194.232ZM78.9994 189.899 86.9994 193.899 78.9994 197.899Z" fill="#7F6C00" transform="matrix(1.83697e-16 1 1 -1.83697e-16 28.5001 47.5001)"/><path d="M966.5 230.678C966.5 228.923 967.923 227.5 969.678 227.5L1269.32 227.5C1271.08 227.5 1272.5 228.923 1272.5 230.678L1272.5 306.323C1272.5 308.077 1271.08 309.5 1269.32 309.5L969.678 309.5C967.923 309.5 966.5 308.077 966.5 306.323Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(976.799 238)">func <tspan fill="#080808" font-size="5" x="15" y="0">(</tspan><tspan fill="#008A91" font-size="5" x="18" y="0">c </tspan><tspan fill="#080808" font-size="5" x="24" y="0">*</tspan><tspan fill="#336ECC" font-size="5" x="27" y="0">conn</tspan><tspan fill="#080808" font-size="5" x="39" y="0">) </tspan><tspan fill="#286D73" font-size="5" x="45" y="0">serve</tspan><tspan fill="#080808" font-size="5" x="59.9999" y="0">(</tspan><tspan fill="#000000" font-size="5" x="62.9999" y="0">ctx </tspan><tspan fill="#805900" font-size="5" x="74.9999" y="0">context</tspan><tspan fill="#080808" font-size="5" x="95.9999" y="0">.</tspan><tspan fill="#336ECC" font-size="5" x="98.9999" y="0">Context</tspan><tspan fill="#080808" font-size="5" x="120" y="0">) {</tspan><tspan fill="#008A91" font-size="5" x="9" y="6">c</tspan><tspan fill="#080808" font-size="5" x="12" y="6">.</tspan><tspan fill="#000000" font-size="5" x="15" y="6">remoteAddr </tspan><tspan fill="#080808" font-size="5" x="47.9999" y="6">= </tspan><tspan fill="#008A91" font-size="5" x="53.9999" y="6">c</tspan><tspan fill="#080808" font-size="5" x="56.9999" y="6">.</tspan><tspan fill="#000000" font-size="5" x="59.9999" y="6">rwc</tspan><tspan fill="#080808" font-size="5" x="68.9999" y="6">.</tspan><tspan fill="#36666B" font-size="5" x="71.9999" y="6">RemoteAddr</tspan><tspan fill="#080808" font-size="5" x="102" y="6">().</tspan><tspan fill="#36666B" font-size="5" x="111" y="6">String</tspan><tspan fill="#080808" font-size="5" x="129" y="6">()</tspan><tspan fill="#000000" font-size="5" x="9" y="13">ctx </tspan><tspan fill="#080808" font-size="5" x="21" y="13">= </tspan><tspan fill="#805900" font-size="5" x="27" y="13">context</tspan><tspan fill="#080808" font-size="5" x="47.9999" y="13">.</tspan><tspan fill="#36666B" font-size="5" x="50.9999" y="13">WithValue</tspan><tspan fill="#080808" font-size="5" x="77.9999" y="13">(</tspan><tspan fill="#000000" font-size="5" x="80.9999" y="13">ctx</tspan><tspan fill="#080808" font-size="5" x="89.9999" y="13">, </tspan><tspan fill="#000000" font-size="5" x="95.9999" y="13">LocalAddrContextKey</tspan><tspan fill="#080808" font-size="5" x="153" y="13">, </tspan><tspan fill="#008A91" font-size="5" x="159" y="13">c</tspan><tspan fill="#080808" font-size="5" x="162" y="13">.</tspan><tspan fill="#000000" font-size="5" x="165" y="13">rwc</tspan><tspan fill="#080808" font-size="5" x="174" y="13">.</tspan><tspan fill="#36666B" font-size="5" x="177" y="13">LocalAddr</tspan><tspan fill="#080808" font-size="5" x="204" y="13">())</tspan><tspan font-size="5" x="9" y="19">var </tspan><tspan fill="#000000" font-size="5" x="21" y="19">inFlightResponse </tspan><tspan fill="#080808" font-size="5" x="71.9999" y="19">*</tspan><tspan fill="#336ECC" font-size="5" x="74.9999" y="19">response</tspan><tspan font-size="5" x="9" y="26">defer func</tspan><tspan fill="#080808" font-size="5" x="39" y="26">() {</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="53.9999" y="26">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="62.9999" y="26">收尾工作：异常处理，日志，连接关闭，连接状态设置，钩子函数执行</tspan><tspan fill="#080808" font-size="5" x="30" y="32">......</tspan><tspan fill="#080808" font-size="5" x="9" y="38">}()</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="9" y="45">// </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="18" y="45">TLS</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="27" y="45">握手，在</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="48.3333" y="45">TCP</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="57.3333" y="45">连接之后，</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="83.9999" y="45">HTTP</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="95.9999" y="45">报文之前</tspan><tspan font-size="5" x="9" y="51">if </tspan><tspan fill="#000000" font-size="5" x="18" y="51">tlsConn</tspan><tspan fill="#080808" font-size="5" x="39" y="51">, </tspan><tspan fill="#000000" font-size="5" x="45" y="51">ok </tspan><tspan fill="#080808" font-size="5" x="53.9999" y="51">:= </tspan><tspan fill="#008A91" font-size="5" x="62.9999" y="51">c</tspan><tspan fill="#080808" font-size="5" x="65.9999" y="51">.</tspan><tspan fill="#000000" font-size="5" x="68.9999" y="51">rwc</tspan><tspan fill="#080808" font-size="5" x="77.9999" y="51">.(*</tspan><tspan fill="#805900" font-size="5" x="86.9999" y="51">tls</tspan><tspan fill="#080808" font-size="5" x="95.9999" y="51">.</tspan><tspan fill="#336ECC" font-size="5" x="98.9999" y="51">Conn</tspan><tspan fill="#080808" font-size="5" x="111" y="51">); </tspan><tspan fill="#000000" font-size="5" x="120" y="51">ok </tspan><tspan fill="#080808" font-size="5" x="129" y="51">{</tspan><tspan fill="#080808" font-size="5" x="18" y="58">......</tspan><tspan fill="#080808" font-size="5" x="9" y="64">}</tspan></text><path d="M595.5 585.227C595.5 582.617 597.617 580.5 600.227 580.5L843.773 580.5C846.383 580.5 848.5 582.617 848.5 585.227L848.5 697.773C848.5 700.384 846.383 702.5 843.773 702.5L600.227 702.5C597.617 702.5 595.5 700.384 595.5 697.773Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(606.272 592)">func <tspan fill="#080808" font-size="5" x="15" y="0">(</tspan><tspan fill="#008A91" font-size="5" x="18" y="0">srv </tspan><tspan fill="#080808" font-size="5" x="30" y="0">*</tspan><tspan fill="#336ECC" font-size="5" x="33" y="0">Server</tspan><tspan fill="#080808" font-size="5" x="51" y="0">) </tspan><tspan fill="#286D73" font-size="5" x="57" y="0">Serve</tspan><tspan fill="#080808" font-size="5" x="72" y="0">(</tspan><tspan fill="#000000" font-size="5" x="75" y="0">l </tspan><tspan fill="#805900" font-size="5" x="81" y="0">net</tspan><tspan fill="#080808" font-size="5" x="90" y="0">.</tspan><tspan fill="#336ECC" font-size="5" x="93" y="0">Listener</tspan><tspan fill="#080808" font-size="5" x="117" y="0">) </tspan>error <tspan fill="#080808" font-size="5" x="141" y="0">{</tspan><tspan fill="#080808" font-size="5" x="9" y="6">......</tspan><tspan font-size="5" x="9" y="13">var </tspan><tspan fill="#000000" font-size="5" x="21" y="13">tempDelay </tspan><tspan fill="#805900" font-size="5" x="51" y="13">time</tspan><tspan fill="#080808" font-size="5" x="63" y="13">.</tspan><tspan fill="#336ECC" font-size="5" x="66" y="13">Duration </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="93" y="13">// how long to sleep on accept failure</tspan><tspan fill="#000000" font-size="5" x="9" y="19">ctx </tspan><tspan fill="#080808" font-size="5" x="21" y="19">:= </tspan><tspan fill="#805900" font-size="5" x="30" y="19">context</tspan><tspan fill="#080808" font-size="5" x="51" y="19">.</tspan><tspan fill="#36666B" font-size="5" x="54" y="19">WithValue</tspan><tspan fill="#080808" font-size="5" x="81" y="19">(</tspan><tspan fill="#000000" font-size="5" x="84" y="19">baseCtx</tspan><tspan fill="#080808" font-size="5" x="105" y="19">, </tspan><tspan fill="#000000" font-size="5" x="111" y="19">ServerContextKey</tspan><tspan fill="#080808" font-size="5" x="159" y="19">, </tspan><tspan fill="#008A91" font-size="5" x="165" y="19">srv</tspan><tspan fill="#080808" font-size="5" x="174" y="19">)</tspan><tspan font-size="5" x="9" y="26">for </tspan><tspan fill="#080808" font-size="5" x="21" y="26">{</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="96" y="26">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="105" y="26">死循环：监听器一直尝试获取连接</tspan><tspan fill="#000000" font-size="5" x="18" y="32">rw</tspan><tspan fill="#080808" font-size="5" x="24" y="32">, </tspan><tspan fill="#000000" font-size="5" x="30" y="32">err </tspan><tspan fill="#080808" font-size="5" x="42" y="32">:= </tspan><tspan fill="#000000" font-size="5" x="51" y="32">l</tspan><tspan fill="#080808" font-size="5" x="54" y="32">.</tspan><tspan fill="#36666B" font-size="5" x="57" y="32">Accept</tspan><tspan fill="#080808" font-size="5" x="75" y="32">()</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="96" y="32">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="105" y="32">阻塞，直到获取到连接。</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="163.667" y="32">rw </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="172.667" y="32">为</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="181" y="32">TCPConn </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="205" y="32">实例</tspan><tspan font-size="5" x="18" y="38">if </tspan><tspan fill="#000000" font-size="5" x="27" y="38">err </tspan><tspan fill="#080808" font-size="5" x="39" y="38">!= </tspan>nil <tspan fill="#080808" font-size="5" x="60" y="38">{</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="33" y="45">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="42" y="45">连接失败后，超时（</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="90" y="45">1</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="93" y="45">秒内）重试</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="119.667" y="45">...</tspan><tspan fill="#080808" font-size="5" x="18" y="51">}</tspan><tspan fill="#000000" font-size="5" x="18" y="58">connCtx </tspan><tspan fill="#080808" font-size="5" x="42" y="58">:= </tspan><tspan fill="#000000" font-size="5" x="51" y="58">ctx</tspan><tspan fill="#080808" font-size="5" x="18" y="64">......</tspan><tspan fill="#000000" font-size="5" x="18" y="70">tempDelay </tspan><tspan fill="#080808" font-size="5" x="48" y="70">= </tspan><tspan fill="#1750EB" font-size="5" x="54" y="70">0</tspan><tspan fill="#000000" font-size="5" x="18" y="77">c </tspan><tspan fill="#080808" font-size="5" x="24" y="77">:= </tspan><tspan fill="#008A91" font-size="5" x="33" y="77">srv</tspan><tspan fill="#080808" font-size="5" x="42" y="77">.</tspan><tspan fill="#36666B" font-size="5" x="45" y="77">newConn</tspan><tspan fill="#080808" font-size="5" x="66" y="77">(</tspan><tspan fill="#000000" font-size="5" x="69" y="77">rw</tspan><tspan fill="#080808" font-size="5" x="75" y="77">)</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="132" y="77">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="141" y="77">将</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="149.333" y="77">TCPConn </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="173.333" y="77">封装成</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="192.333" y="77">conn</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="207.333" y="77">类型</tspan><tspan fill="#000000" font-size="5" x="18" y="83">c</tspan><tspan fill="#080808" font-size="5" x="21" y="83">.</tspan><tspan fill="#36666B" font-size="5" x="24" y="83">setState</tspan><tspan fill="#080808" font-size="5" x="48" y="83">(</tspan><tspan fill="#000000" font-size="5" x="51" y="83">c</tspan><tspan fill="#080808" font-size="5" x="54" y="83">.</tspan><tspan fill="#000000" font-size="5" x="57" y="83">rwc</tspan><tspan fill="#080808" font-size="5" x="66" y="83">, </tspan><tspan fill="#871094" font-size="5" x="72" y="83">StateNew</tspan><tspan fill="#080808" font-size="5" x="96" y="83">, </tspan><tspan fill="#871094" font-size="5" x="102" y="83">runHooks</tspan><tspan fill="#080808" font-size="5" x="126" y="83">) </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="132" y="83">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="141" y="83">设置连接为新建状态：</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="194.333" y="83">0</tspan><tspan font-size="5" x="18" y="90">go </tspan><tspan fill="#000000" font-size="5" x="27" y="90">c</tspan><tspan fill="#080808" font-size="5" x="30" y="90">.</tspan><tspan fill="#36666B" font-size="5" x="33" y="90">serve</tspan><tspan fill="#080808" font-size="5" x="48" y="90">(</tspan><tspan fill="#000000" font-size="5" x="51" y="90">connCtx</tspan><tspan fill="#080808" font-size="5" x="72" y="90">)</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="132" y="90">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="141" y="90">用一个新协程为该连接提供服务</tspan><tspan fill="#080808" font-size="5" x="9" y="96">}</tspan><tspan fill="#080808" font-size="5" x="0" y="102">}</tspan><tspan fill="#7F6C00" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-size="9" x="7.7821" y="78">⊕</tspan></text><path d="M750 494 797.591 494 797.591 496 750 496ZM796.258 491 804.258 495 796.258 499Z" fill="#FF6B6B"/><rect x="804.5" y="470.5" width="154" height="50" stroke="#FFC4C4" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="13" transform="translate(843.169 500)">3.3.提供服务<tspan fill="#7F6C00" font-size="9" x="-20.873" y="-424">⊕</tspan></text><path d="M0-0.333333 2.66667-0.333333 2.66667 0.333333 0 0.333333ZM4.66667-0.333333 7.33333-0.333333 7.33333 0.333333 4.66667 0.333333ZM9.33333-0.333333 12-0.333333 12 0.333333 9.33333 0.333333ZM14-0.333333 16.6667-0.333333 16.6667 0.333333 14 0.333333ZM18.6667-0.333333 21.3333-0.333333 21.3333 0.333333 18.6667 0.333333ZM23.3333-0.333333 26-0.333333 26 0.333333 23.3333 0.333333ZM28-0.333333 30.6667-0.333333 30.6667 0.333333 28 0.333333ZM32.6667-0.333333 35.3333-0.333333 35.3333 0.333333 32.6667 0.333333ZM37.3333-0.333333 40-0.333333 40 0.333333 37.3333 0.333333ZM42-0.333333 44.6667-0.333333 44.6667 0.333333 42 0.333333ZM46.6667-0.333333 49.3333-0.333333 49.3333 0.333333 46.6667 0.333333ZM51.3333-0.333333 54-0.333333 54 0.333333 51.3333 0.333333ZM56-0.333333 58.6667-0.333333 58.6667 0.333333 56 0.333333ZM60.6667-0.333333 62.4627-0.333333 62.4627 1.20394 61.7961 1.20394 61.7961 0 62.1294 0.333333 60.6667 0.333333ZM62.4627 3.20394 62.4627 5.8706 61.7961 5.8706 61.7961 3.20394ZM62.4627 7.8706 62.4627 10.5373 61.7961 10.5373 61.7961 7.8706ZM62.4627 12.5373 62.4627 15.2039 61.7961 15.2039 61.7961 12.5373ZM62.4627 17.2039 62.4627 19.8706 61.7961 19.8706 61.7961 17.2039ZM62.4627 21.8706 62.4627 24.5373 61.7961 24.5373 61.7961 21.8706ZM62.4627 26.5373 62.4627 29.2039 61.7961 29.2039 61.7961 26.5373ZM62.4627 31.2039 62.4627 33.8706 61.7961 33.8706 61.7961 31.2039ZM62.4627 35.8706 62.4627 38.5373 61.7961 38.5373 61.7961 35.8706ZM62.4627 40.5373 62.4627 43.2039 61.7961 43.2039 61.7961 40.5373ZM62.4627 45.2039 62.4627 47.8706 61.7961 47.8706 61.7961 45.2039ZM62.4627 49.8706 62.4627 52.5373 61.7961 52.5373 61.7961 49.8706ZM62.4627 54.5373 62.4627 55.0393 62.1294 54.7059 64.2941 54.7059 64.2941 55.3726 61.7961 55.3726 61.7961 54.5373ZM66.2941 54.7059 68.9607 54.7059 68.9607 55.3726 66.2941 55.3726ZM70.9607 54.7059 73.6274 54.7059 73.6274 55.3726 70.9607 55.3726ZM75.6274 54.7059 78.2941 54.7059 78.2941 55.3726 75.6274 55.3726ZM80.2941 54.7059 82.9607 54.7059 82.9607 55.3726 80.2941 55.3726ZM84.9607 54.7059 87.6274 54.7059 87.6274 55.3726 84.9607 55.3726ZM89.6274 54.7059 92.2941 54.7059 92.2941 55.3726 89.6274 55.3726ZM94.2941 54.7059 96.9607 54.7059 96.9607 55.3726 94.2941 55.3726ZM98.9607 54.7059 101.627 54.7059 101.627 55.3726 98.9607 55.3726ZM103.627 54.7059 106.294 54.7059 106.294 55.3726 103.627 55.3726ZM108.294 54.7059 110.961 54.7059 110.961 55.3726 108.294 55.3726ZM112.961 54.7059 115.627 54.7059 115.627 55.3726 112.961 55.3726ZM116.259 51.0393 124.259 55.0393 116.259 59.0393Z" fill="#7F6C00" transform="matrix(1 0 0 -1 833.5 72.5393)"/><path d="M682.833 520.5 682.833 573.789 682.167 573.789 682.167 520.5ZM686.5 572.455 682.5 580.455 678.5 572.455Z"/><text fill="#008A91" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="7" transform="translate(691.167 550)">srv<tspan fill="#080808" font-size="7" x="11" y="0">.</tspan><tspan fill="#36666B" font-size="7" x="14.6667" y="0">Serve</tspan><tspan fill="#080808" font-size="7" x="33" y="0">(</tspan><tspan fill="#000000" font-size="7" x="36.6667" y="0">ln</tspan><tspan fill="#080808" font-size="7" x="44" y="0">)</tspan></text><path d="M3.9116e-07-0.333333 2.66667-0.33333 2.66667 0.333336-3.9116e-07 0.333333ZM4.66667-0.333328 7.33333-0.333325 7.33333 0.333342 4.66667 0.333339ZM9.33333-0.333322 12-0.333319 12 0.333347 9.33333 0.333344ZM14-0.333317 16.6667-0.333314 16.6667 0.333353 14 0.33335ZM18.6667-0.333311 21.3333-0.333308 21.3333 0.333358 18.6667 0.333355ZM23.3333-0.333306 26-0.333303 26 0.333364 23.3333 0.333361ZM28-0.3333 30.6667-0.333297 30.6667 0.333369 28 0.333366ZM32.6667-0.333295 35.3333-0.333292 35.3333 0.333375 32.6667 0.333372ZM37.3333-0.33329 40-0.333286 40 0.33338 37.3333 0.333377ZM42-0.333284 44.6667-0.333281 44.6667 0.333386 42 0.333383ZM46.6667-0.333279 49.3333-0.333275 49.3333 0.333391 46.6667 0.333388ZM51.3333-0.333273 54-0.33327 54 0.333397 51.3333 0.333394ZM56-0.333268 58.6667-0.333264 58.6667 0.333402 56 0.333399ZM60.6667-0.333262 63.3333-0.333259 63.3333 0.333408 60.6667 0.333405ZM65.3333-0.333257 68-0.333254 68 0.333413 65.3333 0.33341ZM70-0.333251 72.6667-0.333248 72.6667 0.333419 70 0.333415ZM74.6667-0.333246 77.3333-0.333243 77.3333 0.333424 74.6667 0.333421ZM79.3333-0.33324 82-0.333237 82 0.33343 79.3333 0.333426ZM81.4662-3.9999 89.4662 0.000104987 81.4662 4.0001Z" fill="#7F6C00" transform="matrix(-1 0 0 1 611.966 667.5)"/><path d="M966.5 332.358C966.5 325.809 971.809 320.5 978.358 320.5L1260.64 320.5C1267.19 320.5 1272.5 325.809 1272.5 332.358L1272.5 641.643C1272.5 648.191 1267.19 653.5 1260.64 653.5L978.358 653.5C971.809 653.5 966.5 648.191 966.5 641.643Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#080808" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(979.333 338)">......<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="0" y="6">// HTTP/1.x from here on. </tspan><tspan fill="#000000" font-size="5" x="0" y="13">c</tspan>.<tspan fill="#000000" font-size="5" x="6" y="13">r </tspan>= &amp;<tspan fill="#000000" font-size="5" x="21" y="13">connReader</tspan>{<tspan fill="#000000" font-size="5" x="54" y="13">conn</tspan>: <tspan fill="#000000" font-size="5" x="72" y="13">c</tspan>} <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="168" y="13">// </tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="177" y="13">连接读取器</tspan><tspan fill="#000000" font-size="5" x="0" y="19">c</tspan>.<tspan fill="#000000" font-size="5" x="6" y="19">bufr </tspan>= <tspan fill="#000000" font-size="5" x="27" y="19">newBufioReader</tspan>(<tspan fill="#000000" font-size="5" x="72" y="19">c</tspan>.<tspan fill="#000000" font-size="5" x="78" y="19">r</tspan>) <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="168" y="19">// </tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="177" y="19">读缓冲区</tspan><tspan fill="#000000" font-size="5" x="0" y="26">c</tspan>.<tspan fill="#000000" font-size="5" x="6" y="26">bufw </tspan>= <tspan fill="#000000" font-size="5" x="27" y="26">newBufioWriterSize</tspan>(<tspan fill="#000000" font-size="5" x="84" y="26">checkConnErrorWriter</tspan>{<tspan fill="#000000" font-size="5" x="147" y="26">c</tspan>}, <tspan fill="#1750EB" font-size="5" x="159" y="26">4</tspan>&lt;&lt;<tspan fill="#1750EB" font-size="5" x="168" y="26">10</tspan>) <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="189" y="26">// </tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="198" y="26">写缓冲区，</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="224.667" y="26">4K</tspan><tspan fill="#0033B3" font-size="5" x="0" y="32">for </tspan>{ <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="168" y="32">// </tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="177" y="32">又一个死循环，一直尝试获取请求数据</tspan><tspan fill="#000000" font-size="5" x="9" y="39">w</tspan>, <tspan fill="#000000" font-size="5" x="18" y="39">err </tspan>:= <tspan fill="#000000" font-size="5" x="39" y="39">c</tspan>.<tspan fill="#000000" font-size="5" x="45" y="39">readRequest</tspan>(<tspan fill="#000000" font-size="5" x="81" y="39">ctx</tspan>) <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="168" y="39">// </tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="177" y="39">读取请求，返回</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="214.333" y="39">response</tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="238.333" y="39">实例</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="252" y="39">w</tspan><tspan fill="#0033B3" font-size="5" x="9" y="45">if </tspan><tspan fill="#000000" font-size="5" x="18" y="45">c</tspan>.<tspan fill="#000000" font-size="5" x="24" y="45">r</tspan>.<tspan fill="#000000" font-size="5" x="30" y="45">remain </tspan>!= <tspan fill="#000000" font-size="5" x="60" y="45">c</tspan>.<tspan fill="#000000" font-size="5" x="66" y="45">server</tspan>.<tspan fill="#000000" font-size="5" x="87" y="45">initialReadLimitSize</tspan>() { <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="168" y="45">// </tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="177" y="45">读取过程处于活动状态</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="18" y="51">// If we read any bytes off the wire, we</tspan><tspan fill="#8C8C8C" font-family="Calibri,Calibri_MSFontService,sans-serif" font-style="italic" font-size="5" x="138" y="51">‘</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="139.333" y="51">re active.</tspan><tspan fill="#000000" font-size="5" x="18" y="58">c</tspan>.<tspan fill="#000000" font-size="5" x="24" y="58">setState</tspan>(<tspan fill="#000000" font-size="5" x="51" y="58">c</tspan>.<tspan fill="#000000" font-size="5" x="57" y="58">rwc</tspan>, <tspan fill="#000000" font-size="5" x="72" y="58">StateActive</tspan>, <tspan fill="#000000" font-size="5" x="111" y="58">runHooks</tspan>)<tspan font-size="5" x="9" y="64">}</tspan><tspan fill="#0033B3" font-size="5" x="9" y="71">if </tspan><tspan fill="#000000" font-size="5" x="18" y="71">err </tspan>!= <tspan fill="#0033B3" font-size="5" x="39" y="71">nil </tspan>{<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="54" y="71">// ...</tspan>} <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="168" y="71">// </tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="177" y="71">错误处理</tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="198.333" y="71">：</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="203.667" y="71">431</tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="212.667" y="71">，</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="218" y="71">501</tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="227" y="71">，</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="232.333" y="71">20x</tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="241.333" y="71">，</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="246.667" y="71">400</tspan><tspan font-size="5" x="9" y="77">...</tspan>...<tspan fill="#008A91" font-size="5" x="9" y="83">c</tspan>.<tspan fill="#000000" font-size="5" x="15" y="83">curReq</tspan>.<tspan fill="#36666B" font-size="5" x="36" y="83">Store</tspan>(<tspan fill="#000000" font-size="5" x="54" y="83">w</tspan>)<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="168" y="83">// </tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="177" y="83">将</tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="182.333" y="83">请求</tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="193" y="83">与响应实例</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="222.667" y="83">w</tspan><tspan fill="#8C8C8C" font-family="SimSun,SimSun_MSFontService,sans-serif" font-style="oblique" font-size="5" x="225.667" y="83">绑定，回写客户端</tspan><tspan font-size="5" x="9" y="90">...</tspan>...<tspan fill="#000000" font-size="5" x="9" y="96">inFlightResponse </tspan>= <tspan fill="#000000" font-size="5" x="66" y="96">w</tspan><tspan fill="#336ECC" font-size="5" x="9" y="102">serverHandler</tspan>{<tspan fill="#008A91" font-size="5" x="51" y="102">c</tspan>.<tspan fill="#000000" font-size="5" x="57" y="102">server</tspan>}.<tspan fill="#36666B" font-size="5" x="81" y="102">ServeHTTP</tspan>(<tspan fill="#000000" font-size="5" x="111" y="102">w</tspan>, <tspan fill="#000000" font-size="5" x="120" y="102">w</tspan>.<tspan fill="#000000" font-size="5" x="126" y="102">req</tspan>)<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="141" y="102">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="150" y="102">请求信息读取完成，</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="198" y="102">调用</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="208.667" y="102">handler</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="229.667" y="102">处理请求</tspan><tspan fill="#000000" font-size="5" x="9" y="109">inFlightResponse </tspan>= <tspan fill="#0033B3" font-size="5" x="66" y="109">nil</tspan><tspan fill="#000000" font-size="5" x="9" y="115">w</tspan>.<tspan fill="#000000" font-size="5" x="15" y="115">cancelCtx</tspan>()<tspan fill="#0033B3" font-size="5" x="9" y="122">if </tspan><tspan fill="#008A91" font-size="5" x="18" y="122">c</tspan>.<tspan fill="#36666B" font-size="5" x="24" y="122">hijacked</tspan>() {<tspan fill="#0033B3" font-size="5" x="18" y="128">return</tspan><tspan font-size="5" x="9" y="134">}</tspan><tspan fill="#000000" font-size="5" x="9" y="141">w</tspan>.<tspan fill="#36666B" font-size="5" x="15" y="141">finishRequest</tspan>()<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="141" y="141">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="150" y="141">请求完成</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="171.333" y="141">，刷</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="182" y="141">response</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="206" y="141">缓存，数据到客户端</tspan><tspan fill="#0033B3" font-size="5" x="9" y="147">if </tspan>!<tspan fill="#000000" font-size="5" x="21" y="147">w</tspan>.<tspan fill="#36666B" font-size="5" x="27" y="147">shouldReuseConnection</tspan>() {<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="141" y="147">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="150" y="147">尝试复用</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="171.333" y="147">tcp</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="180.333" y="147">连接</tspan><tspan fill="#0033B3" font-size="5" x="18" y="154">if </tspan><tspan fill="#000000" font-size="5" x="27" y="154">w</tspan>.<tspan fill="#000000" font-size="5" x="33" y="154">requestBodyLimitHit </tspan>|| <tspan fill="#000000" font-size="5" x="102" y="154">w</tspan>.<tspan fill="#36666B" font-size="5" x="108" y="154">closedRequestBodyEarly</tspan>() {<tspan fill="#008A91" font-size="5" x="27" y="160">c</tspan>.<tspan fill="#36666B" font-size="5" x="33" y="160">closeWriteAndWait</tspan>()<tspan font-size="5" x="18" y="166">}</tspan><tspan fill="#0033B3" font-size="5" x="18" y="173">return</tspan><tspan font-size="5" x="9" y="179">}</tspan><tspan fill="#008A91" font-size="5" x="9" y="186">c</tspan>.<tspan fill="#36666B" font-size="5" x="15" y="186">setState</tspan>(<tspan fill="#008A91" font-size="5" x="42" y="186">c</tspan>.<tspan fill="#000000" font-size="5" x="48" y="186">rwc</tspan>, <tspan fill="#871094" font-size="5" x="63" y="186">StateIdle</tspan>, <tspan fill="#871094" font-size="5" x="96" y="186">runHooks</tspan>)<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="141" y="186">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="150" y="186">设置连接为空闲状态</tspan><tspan fill="#008A91" font-size="5" x="9" y="192">c</tspan>.<tspan fill="#000000" font-size="5" x="15" y="192">curReq</tspan>.<tspan fill="#36666B" font-size="5" x="36" y="192">Store</tspan>((*<tspan fill="#336ECC" font-size="5" x="60" y="192">response</tspan>)(<tspan fill="#0033B3" font-size="5" x="90" y="192">nil</tspan>))<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="141" y="192">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="150" y="192">响应实例置空，以便处理下次请求信息</tspan><tspan fill="#0033B3" font-size="5" x="9" y="205">if </tspan>!<tspan fill="#000000" font-size="5" x="21" y="205">w</tspan>.<tspan fill="#000000" font-size="5" x="27" y="205">conn</tspan>.<tspan fill="#000000" font-size="5" x="42" y="205">server</tspan>.<tspan fill="#36666B" font-size="5" x="63" y="205">doKeepAlives</tspan>() {<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="141" y="205">// </tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="150" y="205">HTTP1.1</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="171" y="205">持久连接，客户端可以继续发送下个报文</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="18" y="211">// We're in shutdown mode. We might've replied</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="18" y="218">// to the user without "Connection: close" and</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="18" y="224">// they might think they can send another</tspan><tspan fill="#8C8C8C" font-style="italic" font-size="5" x="18" y="230">// request, but such is life with HTTP/1.1.</tspan><tspan fill="#0033B3" font-size="5" x="18" y="237">return</tspan><tspan font-size="5" x="9" y="243">}</tspan><tspan fill="#0033B3" font-size="5" x="9" y="256">if </tspan><tspan fill="#000000" font-size="5" x="18" y="256">d </tspan>:= <tspan fill="#008A91" font-size="5" x="33" y="256">c</tspan>.<tspan fill="#000000" font-size="5" x="39" y="256">server</tspan>.<tspan fill="#36666B" font-size="5" x="60" y="256">idleTimeout</tspan>(); <tspan fill="#000000" font-size="5" x="105" y="256">d </tspan>!= <tspan fill="#1750EB" font-size="5" x="120" y="256">0 </tspan>{<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="141" y="256">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="150" y="256">若服务器空闲时间</tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="195.667" y="256">未超时</tspan><tspan fill="#008A91" font-size="5" x="18" y="262">c</tspan>.<tspan fill="#000000" font-size="5" x="24" y="262">rwc</tspan>.<tspan fill="#36666B" font-size="5" x="36" y="262">SetReadDeadline</tspan>(<tspan fill="#805900" font-size="5" x="84" y="262">time</tspan>.<tspan fill="#36666B" font-size="5" x="99" y="262">Now</tspan>().<tspan fill="#36666B" font-size="5" x="117" y="262">Add</tspan>(<tspan fill="#000000" font-size="5" x="129" y="262">d</tspan>))<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="141" y="262">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="150" y="262">则等待超时</tspan><tspan fill="#0033B3" font-size="5" x="18" y="269">if </tspan><tspan fill="#000000" font-size="5" x="27" y="269">_</tspan>, <tspan fill="#708C00" font-size="5" x="36" y="269">err </tspan>:= <tspan fill="#008A91" font-size="5" x="57" y="269">c</tspan>.<tspan fill="#000000" font-size="5" x="63" y="269">bufr</tspan>.<tspan fill="#36666B" font-size="5" x="78" y="269">Peek</tspan>(<tspan fill="#1750EB" font-size="5" x="93" y="269">4</tspan>); <tspan fill="#708C00" font-size="5" x="105" y="269">err </tspan>!= <tspan fill="#0033B3" font-size="5" x="126" y="269">nil </tspan>{<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="141" y="269">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="150" y="269">再次尝试读取请求缓存，看看是否有数据</tspan><tspan fill="#0033B3" font-size="5" x="27" y="275">return</tspan><tspan font-size="5" x="18" y="282">}</tspan><tspan font-size="5" x="9" y="288">}</tspan><tspan fill="#008A91" font-size="5" x="9" y="294">c</tspan>.<tspan fill="#000000" font-size="5" x="15" y="294">rwc</tspan>.<tspan fill="#36666B" font-size="5" x="27" y="294">SetReadDeadline</tspan>(<tspan fill="#805900" font-size="5" x="75" y="294">time</tspan>.<tspan fill="#336ECC" font-size="5" x="90" y="294">Time</tspan>{})<tspan fill="#8C8C8C" font-style="italic" font-size="5" x="141" y="294">// </tspan><tspan fill="#8C8C8C" font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-style="oblique" font-size="5" x="150" y="294">设置截止时间：不截止。进入下次循环</tspan><tspan font-size="5" x="0" y="301">}</tspan></text><path d="M881.167 469.949 881.167 268.167 960.262 268.167 960.262 268.833 881.5 268.833 881.833 268.5 881.833 469.949ZM958.929 264.5 966.929 268.5 958.929 272.5Z"/><path d="M513.5 216.041C513.5 212.981 515.981 210.5 519.041 210.5L650.959 210.5C654.019 210.5 656.5 212.981 656.5 216.041L656.5 395.959C656.5 399.019 654.019 401.5 650.959 401.5L519.041 401.5C515.981 401.5 513.5 399.019 513.5 395.959Z" stroke="#FFD700" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text fill="#0033B3" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="5" transform="translate(518.743 218)">type <tspan fill="#000000" font-size="5" x="15" y="0">Request </tspan>struct <tspan fill="#080808" font-size="5" x="60" y="0">{</tspan><tspan fill="#000000" font-size="5" x="9" y="6">Method </tspan>string<tspan fill="#000000" font-size="5" x="9" y="13">URL </tspan><tspan fill="#080808" font-size="5" x="21" y="13">*</tspan><tspan fill="#805900" font-size="5" x="24" y="13">url</tspan><tspan fill="#080808" font-size="5" x="33" y="13">.</tspan><tspan fill="#336ECC" font-size="5" x="36" y="13">URL</tspan><tspan fill="#000000" font-size="5" x="9" y="19">Proto </tspan>string <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="63" y="19">// "HTTP/1.0"</tspan><tspan fill="#000000" font-size="5" x="9" y="26">ProtoMajor </tspan>int <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="63" y="26">// 1</tspan><tspan fill="#000000" font-size="5" x="9" y="32">ProtoMinor </tspan>int <tspan fill="#8C8C8C" font-style="italic" font-size="5" x="63" y="32">// 0</tspan><tspan fill="#000000" font-size="5" x="9" y="45">Header </tspan><tspan fill="#336ECC" font-size="5" x="30" y="45">Header</tspan><tspan fill="#000000" font-size="5" x="9" y="51">Body </tspan><tspan fill="#805900" font-size="5" x="24" y="51">io</tspan><tspan fill="#080808" font-size="5" x="30" y="51">.</tspan><tspan fill="#336ECC" font-size="5" x="33" y="51">ReadCloser</tspan><tspan fill="#000000" font-size="5" x="9" y="58">GetBody </tspan>func<tspan fill="#080808" font-size="5" x="45" y="58">() (</tspan><tspan fill="#805900" font-size="5" x="57" y="58">io</tspan><tspan fill="#080808" font-size="5" x="63" y="58">.</tspan><tspan fill="#336ECC" font-size="5" x="66" y="58">ReadCloser</tspan><tspan fill="#080808" font-size="5" x="96" y="58">, </tspan>error<tspan fill="#080808" font-size="5" x="117" y="58">)</tspan><tspan fill="#000000" font-size="5" x="9" y="64">ContentLength </tspan>int64<tspan fill="#000000" font-size="5" x="9" y="70">TransferEncoding </tspan><tspan fill="#080808" font-size="5" x="60" y="70">[]</tspan>string<tspan fill="#000000" font-size="5" x="9" y="83">Close </tspan>bool<tspan fill="#000000" font-size="5" x="9" y="90">Host </tspan>string<tspan fill="#000000" font-size="5" x="9" y="96">Form </tspan><tspan fill="#805900" font-size="5" x="24" y="96">url</tspan><tspan fill="#080808" font-size="5" x="33" y="96">.</tspan><tspan fill="#336ECC" font-size="5" x="36" y="96">Values</tspan><tspan fill="#000000" font-size="5" x="9" y="102">PostForm </tspan><tspan fill="#805900" font-size="5" x="36" y="102">url</tspan><tspan fill="#080808" font-size="5" x="45" y="102">.</tspan><tspan fill="#336ECC" font-size="5" x="48" y="102">Values</tspan><tspan fill="#000000" font-size="5" x="9" y="109">MultipartForm </tspan><tspan fill="#080808" font-size="5" x="51" y="109">*</tspan><tspan fill="#805900" font-size="5" x="54" y="109">multipart</tspan><tspan fill="#080808" font-size="5" x="81" y="109">.</tspan><tspan fill="#336ECC" font-size="5" x="84" y="109">Form</tspan><tspan fill="#000000" font-size="5" x="9" y="122">Trailer </tspan><tspan fill="#336ECC" font-size="5" x="33" y="122">Header</tspan><tspan fill="#000000" font-size="5" x="9" y="128">RemoteAddr </tspan>string<tspan fill="#000000" font-size="5" x="9" y="134">RequestURI </tspan>string<tspan fill="#000000" font-size="5" x="9" y="147">TLS </tspan><tspan fill="#080808" font-size="5" x="21" y="147">*</tspan><tspan fill="#805900" font-size="5" x="24" y="147">tls</tspan><tspan fill="#080808" font-size="5" x="33" y="147">.</tspan><tspan fill="#336ECC" font-size="5" x="36" y="147">ConnectionState</tspan><tspan fill="#000000" font-size="5" x="9" y="154">Cancel </tspan><tspan fill="#080808" font-size="5" x="30" y="154">&lt;</tspan><tspan fill="#080808" font-size="5" x="33" y="154">-</tspan>chan struct<tspan fill="#080808" font-size="5" x="69" y="154">{}</tspan><tspan fill="#000000" font-size="5" x="9" y="166">Response </tspan><tspan fill="#080808" font-size="5" x="36" y="166">*</tspan><tspan fill="#336ECC" font-size="5" x="39" y="166">Response</tspan><tspan fill="#000000" font-size="5" x="9" y="173">ctx </tspan><tspan fill="#805900" font-size="5" x="21" y="173">context</tspan><tspan fill="#080808" font-size="5" x="42" y="173">.</tspan><tspan fill="#336ECC" font-size="5" x="45" y="173">Context</tspan><tspan fill="#080808" font-size="5" x="0" y="179">}</tspan></text></g></svg>